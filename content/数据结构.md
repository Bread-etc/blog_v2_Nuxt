# æ•°æ®ç»“æ„

åšå®¢æ­å»ºå¾—å·®ä¸å¤šäº†ï¼Œå‡†å¤‡å¢åŠ ä¸€ç‚¹å†…å®¹æ¥ä¸°å¯Œæˆ‘çš„åšå®¢ï¼Œæƒ³æ¥æƒ³å»è§‰å¾—`æ•°æ®ç»“æ„`ä½œä¸ºå¼€å¤´æ¯”è¾ƒåˆé€‚ç”¨æ¥é•‡åœºå­ğŸ¤“ä½¿ç”¨è¾ƒç†Ÿæ‚‰çš„`JavaScript`æˆ–è€…`cpp`æ¥å±•ç¤ºã€‚ã€æœ¬æ–‡å‚è€ƒå¤šä¸ºç½‘ç»œä¸Šèµ„æºä»¥åŠã€ŠJavaScripté«˜çº§ç¨‹åºè®¾è®¡ (ç¬¬å››ç‰ˆ)ã€‹ã€‘
## æ•°ç»„
 `JavaScript`å†…çš„æ•°ç»„å’Œå…¶ä»–ç¼–ç¨‹è¯­è¨€çš„æ•°ç»„æœ‰å¾ˆå¤§çš„åŒºåˆ«ï¼Œæ•°ç»„å†…çš„æ¯ä¸ªæ§½ä½éƒ½å¯ä»¥å­˜å‚¨ä»»æ„ç±»å‹çš„æ•°æ®ï¼Œé‡Œé¢å¯ä»¥æ˜¯å¯¹è±¡(Object)ã€å­—ç¬¦ä¸²(String)ã€æ•°å€¼(Number)ã€‚å¦å¤–ï¼Œå€¼å¾—ä¸€æçš„æ˜¯ï¼Œæ•°ç»„æ˜¯åŠ¨æ€å¤§å°çš„ï¼Œä¼šéšç€æ•°æ®æ·»åŠ è€Œè‡ªåŠ¨å¢é•¿ã€‚
### åˆ›å»ºæ•°ç»„
åˆ›å»ºæ•°ç»„çš„æ–¹æ³•æœ‰å¾ˆå¤šï¼Œä¸€èˆ¬æ˜¯ä½¿ç”¨`Array`æ„é€ å‡½æ•°ï¼Œä¾‹å¦‚`let newArr = new Array();`ã€‚æœ‰çš„æ—¶å€™ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥çœç•¥`new`æ“ä½œç¬¦ï¼Œç»“æœéƒ½æ˜¯ä¸€æ ·çš„ã€‚ä½†æ˜¯é‡Œé¢æœ‰äº›æ–°ç‰¹æ€§ï¼š`from()`å’Œ`of()`ä¸¤ä¸ªæ–¹æ³•ï¼Œå‰è€…ç”¨äºå°†`ç±»æ•°ç»„ç»“æ„`è½¬æ¢ä¸ºæ•°ç»„å®ä¾‹ï¼Œè€Œåè€…ç”¨äºå°†ä¸€ç»„å‚æ•°è½¬æ¢ä¸ºæ•°ç»„å®ä¾‹ã€‚å¬èµ·æ¥ç¡®å®æ¯”è¾ƒç©ºï¼Œæˆ‘ä»¬ä¸¾ä¸¤ä¸ªä¾‹å­ğŸŒ°ï¼š
```javascript
// å­—ç¬¦ä¸²è¢«æ‹†åˆ†æˆäº†å•å­—ç¬¦ä¸²çš„æ•°ç»„
console.log(Array.from("joker"));  // ["j", "o", "k", "e", "r"]

// ä½¿ç”¨from()å°†é›†åˆå’Œæ˜ å°„è½¬æ¢ä¸ºä¸€ä¸ªæ–°æ•°ç»„
const m = new Map().set(1, 2).set(3, 4);  // [[1, 2], [3, 4]]
const s = new Set().add(1).add(3);  // [1, 3]

// Array.of()ä»£æ›¿äº†ES6ä¹‹å‰å¸¸ç”¨çš„Array.prototype.slice.call(arguments)
console.log(Array.of(1, 2, 3, 4));  // [1, 2, 3, 4]
console.log(Array.of(undefined));  // [undefined]
```
> åœ¨çº¢å®ä¹¦çš„`6.2.1`ç« èŠ‚ä¸­è¿˜æœ‰æ›´å¤šå…³äºfrom()å’Œof()çš„å†…å®¹ï¼Œæ­¤å¤„å°±ä¸ä¸€ä¸€å™è¿°ã€‚
### æ•°ç»„çš„ç´¢å¼•
æ•°ç»„çš„ç´¢å¼•åœ¨å¾ˆå¤šç¼–ç¨‹è¯­è¨€éƒ½ååˆ†å¸¸è§ï¼ŒJavaScriptä¹Ÿä¸ä¾‹å¤–ï¼Œæ•°ç»„çš„ç´¢å¼•(index)ä¸€èˆ¬éƒ½æ˜¯ä»0å¼€å§‹ï¼Œç„¶åéšç€å…ƒç´ çš„ä¸ªæ•°é€æ¸é€’å¢ã€‚å…¶ä¸­æ•°ç»„çš„`length`å±æ€§çš„ç‹¬ç‰¹ä¹‹å¤„åœ¨äºï¼Œå®ƒä¸æ˜¯åªè¯»çš„ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ä¿®æ”¹`length`å±æ€§ï¼Œå®ç°ä»æ•°ç»„æœ«å°¾æ·»åŠ â•æˆ–è€…åˆ é™¤â–å…ƒç´ ã€‚
```javascript
// åˆ é™¤
let colors = ['red', 'blue', 'green'];  // ä¸‰åŸè‰²
colors.length = 2;
console.log(colors[2]);  // undefined

// æ·»åŠ 
let colors = ['red', 'blue', 'green'];
colors.length = 4;
console.log(colors[3]);  // undefined
// æˆ–è€…æ·»åŠ å…¶ä»–å€¼
colors[colors.length] = "white";  // å°†ç™½è‰²æ·»åŠ åˆ°äº†æ•°ç»„çš„æœ€åä¸€é¡¹
```
### è¿­ä»£å™¨æ–¹æ³•
åœ¨ES6ä¸­ï¼Œ`Array`çš„åŸå‹ä¸Šæš´éœ²äº† 3 ä¸ªç”¨äºæ£€ç´¢æ•°ç»„å†…å®¹çš„æ–¹æ³•ï¼š`keys() / values() / entries()`ã€‚`keys()`è¿”å›æ•°ç»„ç´¢å¼•çš„è¿­ä»£å™¨ï¼Œ`values()`è¿”å›æ•°ç»„å…ƒç´ çš„è¿­ä»£å™¨ï¼Œè€Œ `entries()`è¿”å› ç´¢å¼•/å€¼å¯¹çš„è¿­ä»£å™¨ï¼š
```javascript
const a = ["foo", "bar", "baz", "qux"]; 

const aKeys = Array.from(a.keys());  // [0, 1, 2, 3]
const aValues = Array.from(a.values());  // [ 'foo', 'bar', 'baz', 'qux' ]
const aEntries = Array.from(a.entries());  // [[0, "foo"], [1, "bar"], [2, "baz"], [3, "qux"]]
```
### æ ˆæ–¹æ³•
æ ˆ(stack)æ˜¯ä¸€ç§åè¿›å…ˆå‡º(LIFO, Last-In-First-Out)çš„ç»“æ„ï¼Œå°±åƒå£è¢‹ä¸€æ ·ï¼Œæœ€åæ”¾è¿›å»çš„ä¸œè¥¿ä¼šè¢«æœ€å…ˆæ‹¿å‡ºæ¥ï¼Œè€Œæœ€å¼€å§‹æ”¾å…¥çš„ä¸œè¥¿åœ¨æœ€åæ‰èƒ½æ‹¿å‡ºæ¥ã€‚ECMAScriptæ•°ç»„æä¾›äº†`push()`å’Œ`pop()`æ–¹æ³•æ¥å®ç°ç±»ä¼¼æ ˆçš„è¡Œä¸ºã€‚
`push()`æ–¹æ³•æ¥æ”¶ä»»æ„æ•°é‡çš„å‚æ•°ï¼Œå¹¶å°†å®ƒä»¬æ·»åŠ åˆ°æ•°ç»„æœ«å°¾ï¼Œè¿”å›æ•°ç»„çš„æœ€æ–°é•¿åº¦ã€‚è€Œ`pop()`æ–¹æ³•ç”¨äºåˆ é™¤æ•°ç»„çš„æœ€åä¸€é¡¹ï¼Œè¿”å›è¢«åˆ é™¤çš„é¡¹ã€‚
```js
let colors = new Array();
let count = colors.push("red", "green");
alert(count);  // è¿”å› 2

count.push("blue");
alert(count);  // è¿”å› 3

let item = colors.pop();
alert(item);  // è¿”å› â€œblueâ€
alert(colors.length()); // è¿”å› 2
```
### é˜Ÿåˆ—æ–¹æ³•
é˜Ÿåˆ—(list)æ˜¯ä»¥å…ˆè¿›å…ˆå‡º(FIFO, First-In-First-Out)çš„å½¢å¼é™åˆ¶è®¿é—®ã€‚é˜Ÿåˆ—åœ¨åˆ—è¡¨çš„æœ«å°¾æ·»åŠ æ•°æ®ï¼Œä½†æ˜¯ä»åˆ—è¡¨çš„å¼€å¤´è·å–æ•°æ®ï¼Œç±»ä¼¼ä¸Šé¢æåˆ°çš„å£è¢‹ğŸ‘›ï¼Œä½†æ˜¯å£è¢‹ç ´äº†ä¸€ä¸ªæ´ï¼Œç¬¬ä¸€ä¸ªæ”¾å…¥çš„ä¸œè¥¿å°±ä¼šç¬¬ä¸€ä¸ªæ‰å‡ºæ¥ã€‚ä¸ä¸Šé¢ç±»ä¼¼ï¼Œåœ¨æ•°æ®æœ«å°¾æ·»åŠ æ•°æ®çš„æ–¹æ³•æ˜¯`push()`ï¼Œè€Œä»æ•°ç»„å¼€å¤´å¾—åˆ°æ•°æ®çš„æ–¹æ³•æ˜¯`shift()`ï¼Œé…åˆä¸¤è€…æ¥ä½¿ç”¨ï¼Œå¯ä»¥æŠŠæ•°ç»„å½“æˆé˜Ÿåˆ—æ¥ä½¿ç”¨ã€‚
```js
let colors = new Array();
let count = colors.push("read", "write");
alert(count);  // è¿”å› 2

count.push("listen");  // è¿”å› 3

let item = colors.shift();
alert(item);  // read
alert(colors.length)  // è¿”å› 2
```
>é™¤æ­¤ä»¥å¤–ï¼Œæ•°ç»„ä¹Ÿæœ‰`unshift()`æ–¹æ³•ï¼Œå…¶æ‰§è¡Œæ“ä½œå’Œ`shift()`ç›¸åï¼Œå°±æ˜¯åœ¨æ•°ç»„çš„å¼€å¤´æ·»åŠ ä»»æ„å¤šä¸ªå€¼ï¼Œç„¶åè¿”å›æ–°çš„æ•°ç»„çš„é•¿åº¦ã€‚
### æ’åºæ–¹æ³•
æ•°ç»„ä¸€èˆ¬ä½¿ç”¨ä¸¤ç§æ–¹æ³•æ¥å¯¹å…ƒç´ é‡æ–°æ’åºï¼š`reverse()`å’Œ`sort()`ã€‚å‰è€…å°±æ˜¯ç®€å•åœ°å°†æ•°ç»„å…ƒç´ åå‘æ’åˆ—ï¼Œè™½ç„¶ç›´è§‚ï¼Œä½†è¿œä¸å¦‚åè€…çµæ´»ã€‚
é»˜è®¤æƒ…å†µä¸‹ï¼Œ`sort()`ä¼šæŒ‰ç…§å‡åº(ä»å°åˆ°å¤§)é‡æ–°æ’åˆ—æ•°ç»„å…ƒç´ ã€‚å› æ­¤ï¼Œè¯¥æ–¹æ³•ä¼šåœ¨æ•°ç»„çš„æ¯ä¸€é¡¹ä¸Šéƒ½è°ƒç”¨`String()`è½¬å‹å‡½æ•°ï¼Œç„¶åç”¨äºæ¯”è¾ƒå­—ç¬¦ä¸²å†³å®šé¡ºåºã€‚
```js
let values = [0, 1, 5, 10, 15];
values.sort();
alert(values);  // [0, 1, 10, 15, 5]
```
ä¸ºäº†è§£å†³ä¸Šé¢è¿™ç§å°´å°¬çš„æƒ…å†µï¼Œ`sort()`æ–¹æ³•å¯ä»¥æ¥å—ä¸€ä¸ª**æ¯”è¾ƒå‡½æ•°** ï¼Œç”¨äºåˆ¤æ–­å“ªä¸ªå€¼åº”è¯¥æ’åœ¨å‰é¢ã€‚æ¯”è¾ƒå‡½æ•°æ¥å—ä¸¤ä¸ªå‚æ•°ï¼Œå¦‚æœç¬¬ä¸€ä¸ªå‚æ•°åº”è¯¥æ’åœ¨ç¬¬äºŒä¸ªå‚æ•°å‰é¢ï¼Œå°±è¿”å›è´Ÿå€¼ï¼›ç›¸ç­‰å°±è¿”å›é›¶ï¼›æ’åœ¨åé¢å°±è¿”å›æ­£å€¼ã€‚ä»¥ä¸‹æ˜¯ä¸€ä¸ªä¾‹å­ğŸŒ°ï¼š
```js
function compare(value1, value2) {
	if(value1 < value2) {
		return -1;
	} else if(value1 > value2) {
		return 1;
	} else {
		return 0;
	}
}

let values = [0, 1, 5, 10, 15];
values.sort(compare);
alert(values);  // 0, 1, 5, 10, 15
```
å¦‚æœæŠŠä¸Šé¢çš„å‡½æ•°çš„æ­£è´Ÿå€¼å¯¹è°ƒä¸€ä¸‹ï¼Œå†è°ƒç”¨`sort(compare)`æ–¹æ³•ï¼Œå°±å¯ä»¥å¾—åˆ°`15, 10, 5, 1, 0`ä»å¤§åˆ°å°æ’åºçš„æ•°ç»„ã€‚åœ¨çº¢å®ä¹¦ä¸­ï¼Œç”±äºå‡½æ•°è¾ƒä¸ºç®€å•ï¼Œæ­¤å¤„å¯ä»¥åˆ©ç”¨ä¸‰å…ƒè¡¨è¾¾å¼æ¥å†™æˆä¸€ä¸ªç®­å¤´å‡½æ•°â¡ï¼š
```js
values.sort((a, b) => a < b ? 1 : a > b ? -1 : 0);  // é™åºï¼Œ é»˜è®¤æƒ…å†µæ˜¯å‡åº
alert(values);  // 15, 10, 5, 1, 0
```
å‚è€ƒæ˜é‡‘ä¸Šçš„å…¶ä»–æ–‡ç« ï¼Œä¹Ÿæœ‰ä»¥ä¸‹å†™æ³•ï¼š
```js
let arr = [0, 1, 5, 15, 45];
arr.sort((a, b) => (a-b));  // å‡åº
arr.sort((a, b) => (b-a));  // é™åº
```
>**æ³¨æ„â—**ï¼š`reverse()`å’Œ`sort()`å‡½æ•°éƒ½è¿”å›å®ƒä»¬çš„æ•°ç»„çš„å¼•ç”¨ï¼Œä¼šæ”¹å˜åŸæ¥æ•°ç»„çš„å€¼ï¼Œå› æ­¤å¦‚æœæœ‰åŒæ—¶å®ç°å‡åºå’Œé™åºçš„éœ€æ±‚ï¼Œåº”è¯¥ä½¿ç”¨ä¸­é—´å˜é‡ã€‚
### æ“ä½œæ–¹æ³•
æœ€å¼ºå¤§çš„æ•°ç»„æ–¹æ³•å°±å±`splice()`äº†ï¼Œæ‹¥æœ‰å¤šç§ä½¿ç”¨æ–¹å¼ã€‚ä¸»è¦ç›®çš„æ˜¯åœ¨æ•°ç»„ä¸­é—´æ’å…¥å…ƒç´ ï¼Œä½†æ˜¯æœ‰ 3 ç§ä¸åŒçš„æ–¹æ³•ä½¿ç”¨ï¼š
- **åˆ é™¤**ï¼šç»™`splice()`ä¼ å…¥ä¸¤ä¸ªå‚æ•°ï¼šè¦åˆ é™¤çš„ç¬¬ä¸€ä¸ªå…ƒç´ çš„ä½ç½®å’Œè¦åˆ é™¤çš„å…ƒç´ æ•°é‡ã€‚å¯ä»¥ä»æ•°ç»„ä¸­åˆ é™¤ä»»æ„å¤šä¸ªå…ƒç´ ï¼Œä¾‹å¦‚`splice(0, 2)`ä¼šåˆ é™¤å‰ä¸¤ä¸ªå…ƒç´ ã€‚
- **æ’å…¥**ï¼šç»™`splice()`ä¼ å…¥ä¸‰ä¸ªå‚æ•°ï¼šå¼€å§‹ä½ç½®ã€0ï¼ˆè¦åˆ é™¤çš„å…ƒç´ æ•°é‡ï¼‰ã€è¦æ’å…¥çš„å…ƒç´ ã€‚ä¾‹å¦‚`splice(2, 0, "red", "green")`ä¼šä»æ•°ç»„ä½ç½® 2 å¼€å§‹æ’å…¥è¿™ä¸¤ä¸ªå­—ç¬¦ä¸²ã€‚
- **æ›¿æ¢**ï¼š ç»™`splice()`ä¼ å…¥ä¸‰ä¸ªå‚æ•°ï¼šå¼€å§‹ä½ç½®ã€è¦åˆ é™¤çš„å…ƒç´ æ•°é‡ã€æ›¿æ¢çš„å…ƒç´ ã€‚ä¾‹å¦‚`splice(2, 2, "red", "green")`ä¼šä»ä½ç½® 2 å¼€å§‹åˆ é™¤ä¸¤ä¸ªå…ƒç´ ï¼Œç„¶åç”¨`"red"/ "green"`æ›¿æ¢ã€‚
> **æ³¨æ„âš **ï¼šä»¥ä¸Šæåˆ°çš„ 7 ç§å¤„ç†æ•°ç»„çš„æ–¹æ³•ï¼Œéƒ½ä¼šæ”¹å˜åŸæ¥çš„æ•°ç»„çš„å†…å®¹ï¼Œå¦‚æœéœ€è¦ä¿ç•™åŸæ•°ç»„çš„å†…å®¹ï¼Œè¯·ä½¿ç”¨ä¸‹é¢æåˆ°çš„æ–¹æ³•ã€‚

æ–¹æ³•`join()`ç”¨äºæŠŠæ•°ç»„ä¸­çš„æ‰€æœ‰å…ƒç´ è½¬æ¢ä¸ºä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œå…ƒç´ å¯ä»¥é€šè¿‡æ–¹æ³•å†…åªèƒ½å¾—åˆ†éš”ç¬¦è¿›è¡Œåˆ†éš”ã€‚
```js
const items = ["Matt", "Nicolas", "Jody"];

console.log(items.join());  // "Matt,Nicolas,Jody"
console.log(items.join(''));  // "MattNicolasJody"
console.log(items.join('-'));  // "Matt-Nicola-Jody"
```

æ–¹æ³•`slice()`ç”¨äºåˆ›å»ºä¸€ä¸ªåŒ…å«åŸæœ‰æ•°ç»„ä¸­ä¸€ä¸ªæˆ–å¤šä¸ªå…ƒç´ çš„æ–°æ•°ç»„ï¼Œä¸”å¯ä»¥æ¥å—ä¸€ä¸ªæˆ–ä¸¤ä¸ªå‚æ•°ï¼šè¿”å›å…ƒç´ çš„å¼€å§‹ç´¢å¼•å’Œç»“æŸç´¢å¼•ã€‚å¦‚æœåªæœ‰ä¸€ä¸ªå‚æ•°ï¼Œåˆ™`slice()`ä¼šè¿”å›è¯¥ç´¢å¼•åˆ°æ•°ç»„æœ«å°¾çš„æ‰€æœ‰å…ƒç´ ï¼›ä¸¤ä¸ªå‚æ•°åˆ™è¿”å›ä»å¼€å§‹ç´¢å¼•åˆ°ç»“æŸç´¢å¼•å¯¹åº”çš„æ‰€æœ‰å…ƒç´ ï¼Œå…¶ä¸­ä¸åŒ…æ‹¬ç»“æŸç´¢å¼•å¯¹åº”çš„å…ƒç´ ã€‚
```js
let colors = ["red", "green", "blue", "yellow", "purple"];
let colors2 = colors.slice(1);
let colors3 = colors.slice(1, 4);

alert(colors2);  // green, blue, yellow, purple
alert(colors3);  // green, blue, yellow
```
>**æ³¨æ„**ï¼š å¦‚æœ`slice()`çš„å‚æ•°æœ‰è´Ÿå€¼ï¼Œé‚£ä¹ˆå°±ä»¥æ•°å€¼é•¿åº¦åŠ ä¸Šè¿™ä¸ªè´Ÿå€¼çš„ç»“æœç¡®å®šä½ç½®ã€‚æ¯”å¦‚`slice(-2, -1)`ï¼Œåœ¨ä¸Šè¿°çš„ä¾‹å­ä¸­å°±ç›¸å½“äºè°ƒç”¨`slice(3, 4)`

`concat()`æ–¹æ³•å¯ä»¥åœ¨ç°æœ‰æ•°ç»„å…¨éƒ¨å…ƒç´ çš„åŸºç¡€ä¸Šåˆ›å»ºä¸€ä¸ªæ–°æ•°ç»„ï¼ŒæŠŠå‚æ•°æ·»åŠ åˆ°æ–°å‰¯æœ¬çš„æœ«å°¾ï¼Œå†è¿”å›æ–°å‰¯æœ¬ã€‚ã€æ„Ÿè§‰æœ‰ç‚¹ç±»ä¼¼é«˜çº§ç‰ˆçš„`push()`å’ŒLinuxå†…çš„`cat`å‘½ä»¤ã€‘
```js
let colors = ["red", "green", "blue"];
let colors2 = colors.concat("yellow", ["black", "brown"]);

console.log(colors);  // ["red", "green", "blue"]
console.log(colors2);  // ["red", "green", "blue", "yellow", "black", "brown"]
```
>å€¼å¾—ä¸€æçš„æ˜¯ï¼Œä½¿ç”¨`Symbol.isConcat-Spreadable`ï¼Œè¿™ä¸ªå€¼è®¾ç½®ä¸º`true`å¯ä»¥å¼ºåˆ¶æ‰“å¹³ç±»æ•°ç»„å¯¹è±¡ï¼Œå¦‚æœä½ å¸Œæœ›ä¿æŒç±»æ•°ç»„ç»“æœçš„è¯ï¼Œè¯·å°†è¿™ä¸ªå€¼è®¾ç½®ä¸º`false`ã€‚
### æœç´¢å’Œä½ç½®æ–¹æ³•
æœ‰ä¸¤ç±»æœç´¢æ•°ç»„çš„æ–¹æ³•ï¼šæŒ‰ä¸¥æ ¼ç›¸ç­‰æœç´¢å’ŒæŒ‰æ–­è¨€å‡½æ•°æœç´¢ã€‚
1. ä¸¥æ ¼ç›¸ç­‰
ECMAScriptæä¾›äº† 3 ä¸ªä¸¥æ ¼ç›¸ç­‰çš„æœç´¢æ–¹æ³•ï¼š`indexOf()` / `lastIndexOf()` / `includes()`ã€‚å…¶ä¸­å‰ä¸¤ä¸ªæ–¹æ³•åœ¨æ‰€æœ‰ç‰ˆæœ¬éƒ½å¯ç”¨ï¼Œç¬¬ä¸‰ä¸ªæ–¹æ³•åœ¨ES7æ–°å¢çš„ã€‚è¿™äº›æ–¹æ³•éƒ½æ¥æ”¶ä¸¤ä¸ªå‚æ•°ï¼šè¦æŸ¥æ‰¾çš„å…ƒç´ å’Œä¸€ä¸ªå¯é€‰çš„èµ·å§‹æœç´¢ä½ç½®ã€‚`lastIndexOf()`ä¸å¦å¤–ä¸¤ä¸ªæ–¹æ³•ä¸åŒï¼Œæ˜¯ä»åå‘å‰æœç´¢ã€‚
  å‰ä¸¤ä¸ªæ–¹æ³•éƒ½è¿”å›è¦æŸ¥æ‰¾çš„å…ƒç´ åœ¨æ•°ç»„ä¸­çš„ä½ç½®ï¼Œå¦‚æœæ²¡æœ‰æ‰¾åˆ°å°±è¿”å› -1 ã€‚è€Œ`includes()`è¿”å›å¸ƒå°”å€¼ï¼Œè¡¨ç¤ºæ˜¯å¦æ‰¾åˆ°è‡³å°‘ä¸€ä¸ªä¸æŒ‡å®šå…ƒç´ åŒ¹é…çš„é¡¹ã€‚ã€åœ¨æ¯”è¾ƒç¬¬ä¸€ä¸ªå‚æ•°è·Ÿæ•°ç»„çš„æ¯ä¸€é¡¹æ—¶ï¼Œä¼šä½¿ç”¨å…¨ç­‰`===`è¿›è¡Œæ¯”è¾ƒã€‘
```js
let numbers = [1, 2, 3, 4, 5, 4, 3, 2, 1];

alert(numbers.indexOf(4));  // 3
alert(numbers.lastIndexOf(4));  // 5
alert(numbers.includes(4));  // true

alert(numbers.index(4, 4));  // 5
alert(numbers.lastIndexOf(4, 4));  // 3
alert(numbers.includes(4, 7));  // false
```
2. æ–­è¨€å‡½æ•°
æ–­è¨€å‡½æ•°æ¥æ”¶ 3 ä¸ªå‚æ•°ï¼šå…ƒç´ ã€ç´¢å¼•ã€æ•°ç»„æœ¬èº«ã€‚å…¶ä¸­å…ƒç´ æ˜¯æ•°ç»„ä¸­å½“å‰æœç´¢çš„å…ƒç´ ï¼Œç´¢å¼•æ˜¯å½“å‰å…ƒç´ çš„ç´¢å¼•ï¼Œè€Œæ•°ç»„å°±æ˜¯æ­£åœ¨æœç´¢çš„æ•°ç»„ã€‚æ–­è¨€å‡½æ•°è¿”å›çœŸå€¼ï¼Œè¡¨ç¤ºæ˜¯å¦åŒ¹é…ã€‚å…¶ä¸­`find()`å’Œ`findIndex()`ä½¿ç”¨äº†æ–­è¨€å‡½æ•°ã€‚è¿™ä¸¤ä¸ªæ–¹æ³•éƒ½ä»æ•°ç»„çš„æœ€å°ç´¢å¼•å¼€å§‹ã€‚å‰è€…è¿”å›ç¬¬ä¸€ä¸ªåŒ¹é…çš„å…ƒç´ ï¼Œåè€…è¿”å›ç¬¬ä¸€ä¸ªåŒ¹é…å…ƒç´ çš„ç´¢å¼•ã€‚è¿™ä¸¤ä¸ªæ–¹æ³•ä¹Ÿéƒ½æ¥æ”¶ç¬¬äºŒä¸ªå¯é€‰çš„å‚æ•°ï¼Œç”¨äºæŒ‡å®šæ–­è¨€å‡½æ•°å†…éƒ¨`this`çš„å€¼ã€‚
```js
const people = [{ name: "Matt", age: 29 }, { name: "Niko", age: 26 }];

alert(people.find((element, index, array) => element.age < 28));
// { name: "Niko", age: 26 }

alert(people.findIndex((element, index, array) => element.age > 28));
// 0
```
> å½“æ‰¾åˆ°åŒ¹é…åï¼Œè¯¥æ–¹æ³•ä¸ä¼šå†å‘åæ£€æŸ¥å…¶ä»–å…ƒç´ ã€‚
### è¿­ä»£æ–¹æ³•
æ•°ç»„æœ‰ 5 ä¸ªè¿­ä»£æ–¹æ³•ã€‚æ¯ä¸ªæ–¹æ³•æ¥æ”¶ä¸¤ä¸ªå‚æ•°ï¼šä»¥æ¯ä¸€é¡¹ä¸ºå‚æ•°è¿è¡Œçš„å‡½æ•°ï¼Œä»¥åŠå¯é€‰çš„ä½œä¸ºå‡½æ•°è¿è¡Œä¸Šä¸‹æ–‡çš„ä½œç”¨åŸŸå¯¹è±¡ï¼ˆå½±å“å‡½æ•°ä¸­`this`çš„å€¼ï¼‰ã€‚ä¼ ç»™æ¯ä¸ªæ–¹æ³•çš„å‡½æ•°æ¥æ”¶ 3 ä¸ªå‚æ•°ï¼šæ•°ç»„å…ƒç´ (element)ã€å…ƒç´ ç´¢å¼•(index)å’Œæ•°ç»„æœ¬èº«(array)ã€‚5 ä¸ªè¿­ä»£æ–¹æ³•å¦‚ä¸‹ï¼š
- `every()`ï¼šå¯¹æ•°ç»„çš„æ¯ä¸€é¡¹éƒ½è¿è¡Œä¼ å…¥çš„å‡½æ•°ï¼Œå¦‚æœå¯¹æ¯ä¸€é¡¹å‡½æ•°éƒ½è¿”å›`true`ï¼Œåˆ™è¿™ä¸ªæ–¹æ³•è¿”å›`true`
- `filter()`ï¼š å¯¹æ•°ç»„çš„æ¯ä¸€é¡¹éƒ½è¿è¡Œä¼ å…¥çš„å‡½æ•°ï¼Œå‡½æ•°è¿”å›`true`çš„é¡¹ä¼šç»„æˆæ•°ç»„ä¹‹åè¿”å›ã€‚
- `forEach()`ï¼š å¯¹æ•°ç»„æ¯ä¸€é¡¹éƒ½è¿è¡Œä¼ å…¥çš„å‡½æ•°ï¼Œæ²¡æœ‰è¿”å›å€¼
- `map()`ï¼šå¯¹æ•°ç»„æ¯ä¸€é¡¹éƒ½è¿è¡Œä¼ å…¥çš„å‡½æ•°ï¼Œè¿”å›ç”±æ¯æ¬¡å‡½æ•°è°ƒç”¨çš„ç»“æœæ„æˆçš„æ•°ç»„
- `some()`ï¼šå¯¹æ•°ç»„æ¯ä¸€é¡¹éƒ½è¿è¡Œä¼ å…¥çš„å‡½æ•°ï¼Œå¦‚æœæœ‰ä¸€é¡¹å‡½æ•°è¿”å›`true`ï¼Œåˆ™è¿™ä¸ªæ–¹æ³•è¿”å›`true`ã€‚è¿™äº›æ–¹æ³•éƒ½ä¸æ”¹å˜è°ƒç”¨å®ƒä»¬çš„æ•°ç»„ã€‚
å…¶ä¸­`every()`å’Œ`some()`æ–¹æ³•æœ€ä¸ºç±»ä¼¼ï¼Œéƒ½æ˜¯ä»æ•°ç»„ä¸­æœç´¢ç¬¦åˆæŸä¸ªæ¡ä»¶çš„å…ƒç´ ï¼Œä½†æ˜¯å‰è€…å¿…é¡»æ¯ä¸€é¡¹éƒ½è¿”å›`true`æ‰ä¼šè¿”å›`true`ï¼›è€Œåè€…åªéœ€è¦æœ‰ä¸€é¡¹çš„å‡½æ•°è¿”å›`true`ï¼Œå®ƒå°±ä¼šè¿”å›`true`ã€‚
```js
let numbers = [1, 2, 3, 4, 5, 4, 3, 2, 1];

let everyResult = numbers.every((item, index, array) => item > 2);
alert(everyResult);  // false

let someResult = numbers.some((item, index, array) => item > 2);
alert(someResult);  // true
```
å†çœ‹çœ‹`filter()`æ–¹æ³•ï¼Œè¿™ä¸ªæ–¹æ³•åŸºäºç»™å®šçš„å‡½æ•°æ¥å†³å®šæŸä¸€é¡¹æ˜¯å¦åº”è¯¥åŒ…å«åœ¨å®ƒè¿”å›çš„æ•°ç»„ä¸­ã€‚æ¯”å¦‚ï¼Œè¦è¿”å›ä¸€ä¸ªæ‰€æœ‰æ•°å€¼éƒ½å¤§äº 2 çš„æ•°ç»„ï¼Œå¯ä»¥ä½¿ç”¨å¦‚ä¸‹ä»£ç ï¼š
```js
let numbers = [1, 2, 3, 4, 5, 4, 3, 2, 1];

let filterResult = numbers.filter((item, index, array) => item > 2);
alert(filterResult);  // 3, 4, 5, 4, 3
```
æˆ‘ä»¬å¯ä»¥æŠŠ`filter()`ç†è§£ä¸ºä¸€ä¸ªæ¼æ–—âŒ›ï¸ï¼Œåªé€šè¿‡æˆ‘éœ€è¦çš„å…ƒç´ ï¼Œä¸éœ€è¦çš„å…ƒç´ åˆ™æŠ›å¼ƒã€‚
å¦å¤–ï¼Œ`map()`æ–¹æ³•ä¹Ÿä¼šè¿”å›ä¸€ä¸ªæ•°ç»„ã€‚è¿™ä¸ªæ•°ç»„çš„æ¯ä¸€é¡¹éƒ½æ˜¯å¯¹åŸå§‹æ•°ç»„ä¸­åŒæ ·ä½ç½®çš„å…ƒç´ è¿è¡Œä¼ å…¥å‡½æ•°è€Œè¿”å›çš„ç»“æœã€‚ä¾‹å¦‚ï¼Œå¯ä»¥å°†ä¸€ä¸ªæ•°ç»„ä¸­çš„æ¯ä¸€é¡¹éƒ½ä¹˜ä»¥ 2 ï¼Œå¹¶è¿”å›åŒ…å«æ‰€æœ‰ç»“æœçš„æ•°ç»„ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š
```js
let numbers = [1, 2, 3, 4, 5, 4, 3, 2, 1];

let mapResult = numbers.map((item, index, array) => item * 2);
alert(mapResult);  // 2, 4, 6, 8, 10, 8, 6, 4, 2
```
å¾ˆå¤šæ—¶å€™ï¼Œæˆ‘ä»¬å¹¶ä¸éœ€è¦è°ƒç”¨æ•°ç»„çš„ç´¢å¼•å’Œæ•°ç»„æœ¬èº«ï¼Œæˆ‘ä»¬å¯ä»¥ç®€å†™æˆä»¥ä¸‹å½¢å¼ï¼š
```js
let mapResultSimple = numbers.map(item => item * 2);
alert(mapResultSimple);  // 2, 4, 6, 8, 10, 8, 6, 4, 2
```
ç›®å…‰æ”¾åˆ°`forEach()`æ–¹æ³•ï¼Œè¿™ä¸ªæ–¹æ³•åªä¼šå¯¹æ¯ä¸€é¡¹è¿è¡Œä¼ å…¥çš„å‡½æ•°ï¼Œæ²¡æœ‰è¿”å›å€¼ã€‚æœ¬è´¨ä¸Šå’Œ for å¾ªç¯æ²¡å•¥å¤ªå¤§çš„åŒºåˆ«ã€‚ã€‚ã€‚
```js
forEach((item, index, array) => {
	item ** 2;
})  // å¦‚æœè¿”å›è¯¥å€¼çš„è¯åªä¼šè¿”å› undefined
```
> map() æ–¹æ³•è¿”å›å€¼ï¼Œè€Œ forEach() æ–¹æ³•ä¸è¿”å›å€¼ã€‚
### å½’å¹¶æ–¹æ³•
ç¬¬ä¸€æ¬¡å¬åˆ°**å½’å¹¶**è¿™ä¸ªè¯è¿˜æ˜¯æŒºé™Œç”Ÿçš„ï¼Œè¿™é‡Œè§£é‡Šä¸€ä¸‹ï¼šå½’å¹¶ï¼Œå°±æ˜¯å°†å·²ç»åˆ†æ•£çš„æ•°æ®åˆå¹¶èµ·æ¥ã€‚JSå†…æœ‰ä¸¤ä¸ªå½’å¹¶æ–¹æ³•ï¼š`reduce()`å’Œ`reduceRight()`ã€‚è¿™ä¸¤ä¸ªæ–¹æ³•éƒ½ä¼šè¿­ä»£æ•°ç»„çš„æ‰€æœ‰é¡¹ï¼Œå¹¶åœ¨æ­¤åŸºç¡€ä¸Šæ„å»ºä¸€ä¸ªæœ€ç»ˆè¿”å›å€¼ã€‚`reduce()`æ–¹æ³•ä»æ•°ç»„ç¬¬ä¸€é¡¹å¼€å§‹éå†åˆ°æœ€åä¸€é¡¹ï¼Œè€Œ`reduceRight()`ä¸å…¶ç›¸åã€‚
è¿™ä¸¤ä¸ªæ–¹æ³•éƒ½æ¥æ”¶ä¸¤ä¸ªå‚æ•°ï¼šå¯¹æ¯ä¸€é¡¹éƒ½ä¼šè¿è¡Œçš„å½’å¹¶å‡½æ•°ï¼Œä»¥åŠå¯é€‰çš„ä»¥ä¹‹ä¸ºå½’å¹¶èµ·ç‚¹çš„åˆå§‹å€¼ã€‚ä¼ ç»™`reduce()`å’Œ`reduceRight()`çš„å‡½æ•°æ¥æ”¶ 4 ä¸ªå‚æ•°ï¼šä¸Šä¸€ä¸ªå½’å¹¶å€¼ã€å½“å‰é¡¹ã€å½“å‰é¡¹çš„ç´¢å¼•å’Œæ•°ç»„æœ¬èº«ã€‚è¿™ä¸ªå‡½æ•°çš„è¿”å›çš„ä»»ä½•å€¼éƒ½ä¼šä½œä¸ºä¸‹ä¸€æ¬¡è°ƒç”¨åŒä¸€ä¸ªå‡½æ•°çš„ç¬¬ä¸€ä¸ªå‚æ•°ã€‚å¦‚æœæ²¡æœ‰ä¼ å…¥å¯é€‰çš„ç¬¬äºŒä¸ªå‚æ•°ï¼ˆä½œä¸ºå½’å¹¶èµ·ç‚¹å€¼ï¼‰ï¼Œåˆ™ç¬¬ä¸€æ¬¡è¿­ä»£å°†ä»æ•°ç»„çš„ç¬¬äºŒé¡¹å¼€å§‹ï¼Œå› æ­¤ä¼ ç»™å½’å¹¶å‡½æ•°çš„ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯æ•°ç»„çš„ç¬¬ä¸€é¡¹ï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯æ•°ç»„çš„ç¬¬äºŒé¡¹ã€‚è¿™å¬èµ·æ¥ç¡®å®å¾ˆæŠ½è±¡ç»•å£ï¼Œä»¥ä¸‹æˆ‘ä»¬ä¸¾ä¸¤ä¸ªä¾‹å­ğŸŒ°ï¼š
```js
let values = [1, 2, 3, 4, 5];
let sum = values.reduce((prev, cur, index, array) => prev + cur);
let sumRight = values.reduce((prev, cur, index, array) => prev + cur);

alert(sum);  // 15 (1+2+3+4+5)
alert(sumRight);  // 15 (5+4+3+2+1)
```
## Map
ç”±äºå‰é¢çš„ä»£ç æœ‰æåˆ°`new Map()`å’Œ`new Set()`ï¼Œæˆ‘è§‰å¾—æœ‰å¿…è¦åœ¨è¿™é‡Œæä¸€ä¸‹ã€‚Map æ˜¯ ES6 æ–°å¢çš„ç‰¹æ€§ï¼Œä½œä¸ºä¸€ç§æ–°çš„é›†åˆç±»å‹ï¼Œä¸ºè¿™é—¨è¯­è¨€å¸¦æ¥çš„çœŸæ­£çš„ é”®/å€¼ å­˜å‚¨æœºåˆ¶ã€‚Map çš„å¤§å¤šæ•°ç‰¹æ€§éƒ½å¯ä»¥é€šè¿‡ Object ç±»å‹å®ç°ï¼Œä½†æ˜¯äºŒè€…è¿˜æ˜¯å­˜åœ¨ä¸€äº›ç»†å¾®çš„å·®å¼‚ã€‚
### åŸºæœ¬ API
ä½¿ç”¨`new`å…³é”®å­—å’Œ`Map`æ„é€ å‡½æ•°å°±å¯ä»¥åˆ›å»ºä¸€ä¸ªç©ºæ˜ å°„ï¼š`const m = new Map()`ã€‚åˆå§‹åŒ–åï¼Œå¯ä»¥ä½¿ç”¨`set()`æ–¹æ³•å†æ·»åŠ é”®å€¼å¯¹ã€‚å¦å¤–å¯ä»¥ä½¿ç”¨`get()`å’Œ`has()`è¿›è¡ŒæŸ¥è¯¢ï¼Œå¯ä»¥é€šè¿‡ size å±æ€§è·å–æ˜ å°„ä¸­é”®å€¼å¯¹çš„æ•°é‡ï¼Œè¿˜å¯ä»¥ä½¿ç”¨`delete()`å’Œ`clear()`åˆ é™¤å€¼ã€‚
```js
const m = new Map();

alert(m.has("firstName"));  // false
alert(m.get("firstName"));  // undefined
alert(m.size);  // 0

m.set("firstName", "Jody").set("lastName", "brown");

alert(m.has("firstName"));  // true
alert(m.get("firstName"));  // Jody
alert(m.size);  // 2

m.delete("firstName");

alert(m.has("firstName"));  // false
alert(m.has("lastName"));  // true
alert(m.size);  // 1

m.clear();  // æ¸…é™¤æ˜ å°„å®ä¾‹ä¸­çš„æ‰€æœ‰é”®å€¼å¯¹
```
ä¸`Object`åªèƒ½ä½¿ç”¨æ•°å€¼ã€å­—ç¬¦ä¸²æˆ–ç¬¦å·ä½œä¸ºé”®ä¸åŒï¼Œ`Map`å¯ä»¥ä½¿ç”¨ä»»ä½• JavaScriptæ•°æ®ç±»å‹ä½œä¸ºé”®ï¼Œ`Map`å†…éƒ¨ä½¿ç”¨ SameValueZero æ¯”è¾ƒæ“ä½œï¼ŒåŸºæœ¬ä¸Šç›¸å½“äºä½¿ç”¨ä¸¥æ ¼å¯¹è±¡ç›¸ç­‰çš„æ ‡å‡†æ¥æ£€æŸ¥é”®çš„åŒ¹é…æ€§ã€‚å’Œå¯¹è±¡ç±»ä¼¼ï¼Œæ˜ å°„çš„å€¼æ˜¯æ²¡æœ‰é™åˆ¶çš„ã€‚
### é¡ºåºä¸è¿­ä»£
ä¸ `Object` ç±»å‹çš„ä¸€ä¸ªä¸»è¦å·®å¼‚æ˜¯ï¼Œ`Map`å®ä¾‹ä¼šç»´æŠ¤é”®å€¼å¯¹çš„æ’å…¥é¡ºåºï¼Œå› æ­¤å¯ä»¥æ ¹æ®æ’å…¥é¡ºåºæ‰§è¡Œè¿­ä»£æ“ä½œã€‚
æ˜ å°„å®ä¾‹å¯ä»¥æä¾›ä¸€ä¸ªè¿­ä»£å™¨ï¼ˆIteratorï¼‰ï¼Œèƒ½ä»¥æ’å…¥é¡ºåºç”Ÿæˆé”®å€¼å¯¹å½¢å¼çš„æ•°ç»„ï¼Œå¯ä»¥é€šè¿‡`entries()`æ–¹æ³•ï¼ˆæˆ–è€… Symbol.iterator å±æ€§ï¼Œå®ƒå¼•ç”¨`entries()`ï¼‰å–å¾—è¿™ä¸ªè¿­ä»£å™¨ï¼š
```js
const m = new Map([
	["key1", "value1"],
	["key2", "value2"],
	["key3", "value3"]
]);

alert(m.entries === m[Symbol.iterator()]);  // true

for (let pair of m.entries()) {
	alert(pair);
}
// [key1, value1]
// [key2, value2]
// [key3. value3]
for (let pair of m[Symbol.iterator]()) {
	alert(pair);
}
// [key1, value1]
// [key2, value2]
// [key3. value3]
```
ç”±äº`entries()`æ˜¯é»˜è®¤è¿­ä»£å™¨ï¼Œæ‰€ä»¥å¯ä»¥ç›´æ¥å¯¹æ˜ å°„å®ä¾‹ä½¿ç”¨æ‰©å±•æ“ä½œï¼ŒæŠŠæ˜ å°„è½¬æ¢ä¸ºæ•°ç»„ï¼š
```js
const m = new Map([
	["key1", "val1"],
	["key2", "val2"],
	["key3", "val3"]
]);
console.log([...m]); // [[key1,val1],[key2,val2],[key3,val3]]
```
å¦å¤–ï¼Œmapå®ä¾‹ä¹Ÿæœ‰`keys()`å’Œ`values()`æ–¹æ³•è¿”å›é”®å’Œå€¼ï¼Œè¿™é‡Œå°±ä¸ä¸€ä¸€è§£é‡Šã€‚
> ä¸åŒæµè§ˆå™¨çš„æƒ…å†µä¸åŒï¼Œä½†åœ¨å›ºå®šå¤§å°çš„å†…å­˜ä¸­ï¼Œ`Map`å¤§çº¦å¯ä»¥æ¯”`Object`å¤šå­˜å‚¨ 50% çš„é”®å€¼å¯¹ã€‚ä¸”æ’å…¥`Map`åœ¨æµè§ˆå™¨ä¼šç¨å¾®å¿«ä¸€ç‚¹ï¼Œå¦‚æœæ¶‰åŠå¤§é‡æ’å…¥æ“ä½œï¼Œé€‰æ‹© Map ä¼šæ›´å¥½ã€‚å¦‚æœæ¶‰åŠå¤§é‡æŸ¥æ‰¾ï¼Œ`Object`ä¼šå¥½ä¸€äº›ã€‚ä½†æ˜¯æ€§èƒ½é€æ¸å‘å±•çš„ä»Šå¤©ï¼Œå¦‚æœæ˜¯ç”¨äºä¸ªäººé¡¹ç›®ï¼Œä¸¤è€…çš„æ€§èƒ½å·®è·å‡ ä¹å¯ä»¥å¿½ç•¥ä¸è®¡äº†ã€‚
## Set
`Set`åœ¨å¾ˆå¤šæ–¹é¢éƒ½åƒæ˜¯åŠ å¼ºç‰ˆçš„`Map`ï¼Œè¿™æ˜¯å› ä¸ºå®ƒä»¬çš„å¤§å¤šæ•° API å’Œè¡Œä¸ºéƒ½æ˜¯å…±æœ‰çš„ã€‚
### åŸºæœ¬ API
å’Œ`Map`ç›¸åŒï¼Œç›¸åŒçš„å…³é”®å­—`new`å’Œ`has() / size / delete() / clear()`ç­‰æ–¹æ³•å°±ä¸å†èµ˜è¿°ã€‚å¦å¤–ï¼Œ`Set`åˆå§‹åŒ–ä¹‹åï¼Œå¯ä»¥ä½¿ç”¨`add()`å¢åŠ å€¼ï¼š
```js
const s = new Set();

s.add("Matt").add("Niko");

alert(s.has("Matt"));  // true
alert(s.size);  // 2

s.clear();
alert(s.has("Niko"));  // false
alert(s.size);  // 0
```
ä¸`Map`ç±»ä¼¼ï¼Œ`Set`å¯ä»¥åŒ…å«ä»»ä½• JavaScript æ•°æ®ç±»å‹ä½œä¸ºå€¼ã€‚é›†åˆä¹Ÿä½¿ç”¨ SameValueZero æ“ä½œï¼ŒåŸºæœ¬ä¸Šç›¸å½“äºä½¿ç”¨ä¸¥æ ¼å¯¹è±¡ç›¸ç­‰çš„æ ‡å‡†æ¥æ£€æŸ¥å€¼çš„åŒ¹é…æ€§ã€‚
> ä¸ Python çš„å…ƒç»„ç±»ä¼¼ï¼Œé›†åˆé‡Œé¢çš„å…ƒç´ å’Œé«˜ä¸­æ•°å­¦å†…ä¼ ç»Ÿçš„é›†åˆæ˜¯ä¸€æ ·çš„ï¼šå³é‡Œé¢ä¸èƒ½å­˜åœ¨ç›¸åŒçš„å€¼ã€‚
### é¡ºåºä¸è¿­ä»£
é›†åˆå®ä¾‹æä¾›ä¸€ä¸ªè¿­ä»£å™¨ï¼Œèƒ½ä»¥æ’å…¥é¡ºåºç”Ÿæˆé›†åˆå†…å®¹ï¼Œå¯ä»¥é€šè¿‡`values()`å’Œåˆ«åæ–¹æ³•`keys()`ï¼ˆæˆ–è€… Symbol.iterator å±æ€§ï¼Œå®ƒå¼•ç”¨`values()`å–å¾—è¿™ä¸ªè¿­ä»£å™¨ï¼‰ã€‚ã€æ­¤å¤„å‡ ä¹å’ŒMapæ²¡æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Œå°±ä¸ä¸€ä¸€å±•ç¤ºä»£ç äº†ğŸ–ï¼Œè¯¦æƒ…å¯ä»¥æŸ¥é˜…çº¢å®ä¹¦çš„`6.6.2`ç« èŠ‚ã€‘
## é“¾è¡¨
é“¾è¡¨ç»“æ„æ˜¯å†…å­˜å†…éƒ¨çš„ä¸€ç§å­˜å‚¨æ–¹å¼ï¼Œé“¾è¡¨æ˜¯æŠŠä¸€ç³»åˆ—èŠ‚ç‚¹(node)ä¸²è”èµ·æ¥ï¼Œæ¯ä¸ªèŠ‚ç‚¹è‡³å°‘åŒ…å«ä¸¤ä¸ªéƒ¨åˆ†ï¼š`æ•°æ®åŸŸ`ä¸`æŒ‡é’ˆåŸŸ`ã€‚æ¯ä¸ªèŠ‚ç‚¹é€šè¿‡æŒ‡é’ˆåŸŸçš„å€¼ï¼Œå½¢æˆä¸€ä¸ªçº¿æ€§ç»“æ„ã€‚
[![linked-list.png](https://www.freeimg.cn/i/2024/03/11/65eec12e387ad.png)](https://www.freeimg.cn/i/2024/03/11/65eec12e387ad.png)é“¾è¡¨å¯ä»¥åˆ†ä¸ºä¸‰ç±»ï¼š
- å•å‘é“¾è¡¨ï¼šçº¿æ€§æ•°æ®ç»“æ„ï¼ŒæŒ‡é’ˆæŒ‡å‘ä¸‹ä¸€ä¸ªç»“ç‚¹ï¼Œç»ˆç‚¹æŒ‡å‘null
- åŒå‘é“¾è¡¨ï¼šå¯ä»¥å¾€å‰æˆ–å¾€åæ·»åŠ èŠ‚ç‚¹ï¼ŒæŒ‡é’ˆæŒ‡å‘å‰ä¸€ä¸ªèŠ‚åå’Œåä¸€ä¸ªèŠ‚ç‚¹
- å¾ªç¯é“¾è¡¨ï¼šå¾ªç¯é“¾è¡¨çš„ç¬¬ä¸€ä¸ªèŠ‚ç‚¹æŒ‡å‘æœ€åä¸€ä¸ªèŠ‚ç‚¹ï¼Œæœ€åä¸€ä¸ªèŠ‚ç‚¹æŒ‡å‘ç¬¬ä¸€ä¸ªèŠ‚ç‚¹ã€åˆå¯ç»†åˆ†ä¸ºâ€œå•å‘å¾ªç¯é“¾è¡¨â€å’Œâ€œåŒå‘å¾ªç¯é“¾è¡¨â€ã€‘
### å•å‘é“¾è¡¨
æˆ‘ä»¬å…ˆå†™ä¸€ä¸ªç®€å•çš„èŠ‚ç‚¹çš„**ç±»**ï¼š
```js
class Node {
	constructor(value) {
		this.value = value;
		this.next = null;
	}
}
```
ç„¶åå†åˆ›å»ºé“¾è¡¨ï¼Œå…¶ä¸­é“¾è¡¨åŒ…å«ä¸€ä¸ª`head`æŒ‡é’ˆï¼Œ`size`è¡¨ç¤ºé“¾è¡¨çš„èŠ‚ç‚¹çš„ä¸ªæ•°ï¼š
```js
class LinkedList {
	constructor() {
		this.head = null;
		this.size = 0;
	}
}
```
ä»ä¸Šé¢çš„å›¾ç‰‡å¯ä»¥çœ‹åˆ°ï¼ŒèŠ‚ç‚¹çš„æ’å…¥å’Œåˆ é™¤æ“ä½œæ— éå°±æ˜¯**æ“ä½œæŒ‡é’ˆçš„æŒ‡å‘**ã€‚ä»¥ä¸‹ä¼šæ–°å¢å‡ ä¸ªå¯¹é“¾è¡¨è¿›è¡Œæ“ä½œçš„æ–¹æ³•ã€‚ã€LinkedListç±»çš„æ–¹æ³•ã€‘
`add(value)`**å¾€é“¾è¡¨æ–°å¢èŠ‚ç‚¹ï¼š**
```js
add(value) {
	const node = new Node(value);  // æ–°å¢èŠ‚ç‚¹
	let curr;  // å½“å‰èŠ‚ç‚¹
	if (this.head === null) {
		// å¦‚æœæ˜¯ç©ºé“¾è¡¨çš„è¯ï¼Œå°†ç©ºé“¾è¡¨çš„å¤´æŒ‡é’ˆheadæŒ‡å‘èŠ‚ç‚¹
		this.head = node;
	} else {
		// éç©ºï¼Œcurråˆå§‹åŒ–ä¸ºé“¾è¡¨çš„å¤´èŠ‚ç‚¹ this.head
		curr = this.head;
		while(curr.next) {  // å½“ä¸‹ä¸€èŠ‚ç‚¹ä¸ä¸ºç©ºçš„æ—¶å€™ï¼Œç»§ç»­æŒ‡å‘ä¸‹ä¸€èŠ‚ç‚¹
			curr = curr.next;
		}
		curr.next = node;
	}
	this.size++;
}
```
`insert(index, value)`**æŒ‡å®šä½ç½®æ’å…¥èŠ‚ç‚¹ï¼š**
```js
insert(index, value) {
	if (index < 0 || index > this.size - 1) {
		return false;  // æ’å…¥æ“ä½œæ— æ•ˆ
	} else {
		const node = new Node(value);
		let prev, curr = this.head;  // è®°å½•å‰ä¸€ä¸ªèŠ‚ç‚¹å’Œå½“å‰èŠ‚ç‚¹

		// å¤´éƒ¨æ’å…¥
		if (index === 0) {
			node.next = curr;  // ç›´æ¥å°†æ–°èŠ‚ç‚¹æ’å…¥åˆ°å¤´éƒ¨ï¼Œå¹¶å°†æ–°èŠ‚ç‚¹çš„ next æŒ‡é’ˆæŒ‡å‘å½“å‰å¤´èŠ‚ç‚¹ curr
		} else {
			// éå¤´éƒ¨æ’å…¥ï¼Œä»å‰å¾€åæŸ¥æ‰¾åˆ°èŠ‚ç‚¹ï¼Œç„¶åæ”¹å˜æŒ‡é’ˆçš„æŒ‡å‘
			while(index > 0) {
				prev = curr;
				curr = curr.next;
				index--;
			}
			prev.next = node;
			node.next = curr;
		}
		this.size++;  // å¢åŠ é“¾è¡¨çš„å¤§å°
	}
}
```
`removeByIndex(index)`**æŒ‡å®šä½ç½®åˆ é™¤èŠ‚ç‚¹ï¼š**
```js
removeByIndex(index) {
	if(index < 0 || index > this.size - 1) {
		return;  // åˆ é™¤æ“ä½œæ— æ•ˆ
	}
	let prev, curr = this.head;  // åˆå§‹åŒ–è®°å½•å‰ä¸€ä¸ªèŠ‚ç‚¹å’Œå½“å‰èŠ‚ç‚¹
	if (index === 0) {
		this.head = curr.next;  // ç§»é™¤å¤´èŠ‚ç‚¹ï¼ŒæŒ‡å‘ä¸‹ä¸€ä¸ªèŠ‚ç‚¹
	} else {
		// éå†è·å–æŒ‡å®šä¸‹æ ‡çš„èŠ‚ç‚¹ï¼ˆå¯»æ‰¾æŒ‡å®šèŠ‚ç‚¹ï¼‰
		while(index > 0) {
			prev = curr;
			curr = curr.next;
			index--;
		}
		// æ‰¾åˆ°æŒ‡å®šèŠ‚ç‚¹å°±å‰åç›¸è¿
		prev.next = curr.next;
	}
	this.size--;
	return curr.value;  // è¿”å›è¢«åˆ é™¤èŠ‚ç‚¹çš„å€¼
}
```
`indexOf(value)`**æŸ¥æ‰¾ç›®æ ‡å€¼çš„èŠ‚ç‚¹ä¸‹æ ‡ï¼š**
```js
indexOf(value) {
	let index = 0;  // åˆå§‹åŒ–ç´¢å¼• index = 0
	let curr = this.head;  // curr åˆå§‹åŒ–ä¸ºé“¾è¡¨çš„å¤´èŠ‚ç‚¹
	while(curr) {
		if (curr.value === value) {
			return index;
		}
		curr = curr.next;  // æŒ‡å‘ä¸‹ä¸€ä¸ªèŠ‚ç‚¹
		index++;
	}
	return -1;  // æ²¡æœ‰æ‰¾åˆ°ç›®æ ‡
}
```
`removeByValue(value)`**æŒ‡å®šå€¼åˆ é™¤èŠ‚ç‚¹ï¼š**
```js
removeByValue(value) {
	const index = this.indexOf(value);
	return this.removeByIndex(index);
}
```
`pop()`**å¼¹å‡ºæœ€åä¸€ä¸ªèŠ‚ç‚¹ï¼š**
```js
pop() {
	let prev, curr = this.head; // åˆå§‹åŒ–ä¸¤ä¸ªå˜é‡è®°å½•å‰ä¸€ä¸ªèŠ‚ç‚¹å’Œå½“å‰èŠ‚ç‚¹
	// å¦‚æœé“¾è¡¨ä¸ºç©ºçš„è¯ï¼Œç›´æ¥è¿”å› null
	if (this.size === 0) return null;
	if (!curr.next) {
		// åªæœ‰ä¸€ä¸ªèŠ‚ç‚¹çš„æƒ…å†µ
		this.head = null;  // ç§»é™¤äº†å”¯ä¸€ä¸€ä¸ªèŠ‚ç‚¹
	} else {
		while(curr.next) {
			prev = curr;
			curr = curr.next;
		}
		prev.next = null;  // ç§»é™¤æœ€åä¸€ä¸ªèŠ‚ç‚¹
	}
	this.size--;
}
```
`isEmpty()`**åˆ¤æ–­æ˜¯å¦ä¸ºç©ºï¼š**
```js
isEmpty() {
	return this.size === 0;
}
```
`print()`**æ‰“å°é“¾è¡¨ï¼š**
```js
print() {
	const arr = [];  // åˆå§‹åŒ–ç©ºæ•°ç»„
	let curr = this.head;  // è·å–å½“å‰èŠ‚ç‚¹
	while(curr) {
		arr.push(curr.value);  // å‹å…¥å½“å‰èŠ‚ç‚¹çš„å€¼åˆ°æ•°ç»„ä¸­
		curr = curr.next;  // å‘åæ›´æ”¹èŠ‚ç‚¹
	}
	console.log(arr.join('->'));  // ä½¿ç”¨ -> åˆ†éš”
}
```
> æ„Ÿè°¢[æ•°æ®ç»“æ„-é“¾è¡¨ï¼ˆjavascriptç‰ˆï¼‰ - Kelen](https://www.kelen.cc/posts/javascript-linked-list#google_vignette)æä¾›çš„èµ„æ–™ï¼Œå¦å¤–æä¸€å˜´ï¼Œè¿™ä¸ªåšå®¢åšå¾—ä¹ŸæŒºå¥½çœ‹ã€‚
### åŒå‘é“¾è¡¨
åŒå‘é“¾è¡¨æŒ‡çš„æ˜¯æ¯ä¸ªæ•°æ®èŠ‚ç‚¹éƒ½æœ‰ä¸¤ä¸ªæŒ‡é’ˆï¼Œåˆ†åˆ«æŒ‡å‘ç›´æ¥åç»§å’Œç›´æ¥å‰é©±ã€‚ç‰¹ç‚¹åœ¨äºï¼Œä½¿ç”¨`head`å’Œ`tail`åˆ†åˆ«æŒ‡å‘å¤´éƒ¨å’Œå°¾éƒ¨çš„èŠ‚ç‚¹ï¼Œç¬¬ä¸€ä¸ªèŠ‚ç‚¹çš„`prev`æ˜¯nullï¼Œæœ€åä¸€ä¸ªèŠ‚ç‚¹çš„`next`æ˜¯nullã€‚
ç°åœ¨æˆ‘ä»¬æ¥ç®€å•åœ°å°è£…ä¸‹ä¸€ä¸ªåŒå‘é“¾è¡¨â¬…â¡ï¼š
```js
class Node {
	constructor(value) {
		this.value = value;  // å½“å‰èŠ‚ç‚¹çš„å€¼
		this.next = null;  // ä¸‹ä¸€ä¸ªèŠ‚ç‚¹çš„å€¼
		this.prev = null;  // ä¸Šä¸€ä¸ªèŠ‚ç‚¹çš„å€¼
	}
}
```
å¦å¤–ï¼Œé“¾è¡¨çš„æ„é€ ä¹Ÿå’Œå•å‘é“¾è¡¨ç›¸ä¼¼ï¼š
```js
class LinkedList {
	constructor() {
		this.head = null;  // å¤´èŠ‚ç‚¹
		this.tail = null;  // å°¾èŠ‚ç‚¹
		this.size = 0;  // é•¿åº¦
	}
}
```
åŒå‘é“¾è¡¨çš„æ·»åŠ æ–°å…ƒç´ çš„æ–¹æ³•å’Œå•å‘é“¾è¡¨ç›¸ä¼¼ï¼Œä½†æ˜¯éœ€è¦è®¾ç½®æ–°èŠ‚ç‚¹çš„`prev`å±æ€§ï¼Œä½¿å…¶æŒ‡å‘è¯¥èŠ‚ç‚¹çš„å‰é©±ã€‚`add(value)`**å¾€é“¾è¡¨æ–°å¢èŠ‚ç‚¹ï¼š**
```js
add(value) {
	const node = new Node(value);  // æ–°å¢èŠ‚ç‚¹
	if (this.head === null) {
		// å¦‚æœæ˜¯ç©ºé“¾è¡¨çš„è¯ï¼Œå°†ç©ºé“¾è¡¨çš„å¤´æŒ‡é’ˆheadå’Œå°¾æŒ‡é’ˆtailæŒ‡å‘èŠ‚ç‚¹
		this.head = node;
		this.tail = node;
		node.prev = null;
	} else {
		// éç©ºé“¾è¡¨ï¼Œå°¾èŠ‚ç‚¹æ’å…¥æ–°çš„èŠ‚ç‚¹node
		this.tail.next = node;  // å°¾ -> newNode
		node.prev = this.tail;  // newNode <- tail
		this.tail = node;  // tail -> newNode
	}
	this.size++;
}
```
`insert(value)`**æŒ‡å®šä½ç½®æ’å…¥èŠ‚ç‚¹**ï¼š
```js
insert(index, value) {
	if (index < 0 || index > this.size -1) {
		return false;  // è¶Šç•Œåˆ¤æ–­ï¼Œæ’å…¥æ“ä½œæ— æ•ˆ
	} else {
		const node = new Node(value);  // åˆ›å»ºæ–°èŠ‚ç‚¹
		
		if (this.size === null) {
			// åˆ¤æ–­é“¾è¡¨æ˜¯å¦ä¸ºç©º
			this.head = node;
			this.tail = node;
		} else {
			if (index === 0) {
				// å¤´éƒ¨æ’å…¥
				this.head.prev = node;  // headæŒ‡é’ˆå‰ä¸€ä¸ªèŠ‚ç‚¹ -> node
				node.next = this.head;  // nodeæ’å…¥ååä¸€ä¸ªèŠ‚ç‚¹ -> head
				this.head = node;  // å¤´æŒ‡é’ˆheadæŒ‡å‘node
			} else if (index === this.size) {
				// å°¾éƒ¨æ’å…¥
				node.prev = this.tail;  // nodeçš„prevè®¾ç½®ä¸ºtail
				this.tail.next = node;  // æ’å…¥å°¾èŠ‚ç‚¹ä¸ºtailçš„next
				this.tail = node;  // å°¾æŒ‡é’ˆtailæŒ‡å‘node
			} else {
				// é™¤äº†å¤´æ’å…¥å’Œå°¾æ’å…¥çš„å…¶ä»–æƒ…å†µ ï¼ˆä»å¤´èŠ‚ç‚¹å¼€å§‹éå†ï¼‰
				let curr = this.head;
				let prev = null;
				let i = 0;
				while (i < index) {
					prev = curr;
					curr = curr.next;
					i++;
				}
				node.prev = prev;  // node.prev -> prev
				prev.next = node;  // prev -> node
				node.next = curr;  // node -> curr
				curr.prev = node;  // curr.prev -> node
			}
		}
		this.size++;
		return true;
	}
}
```
`removeByIndex(index)`**æŒ‡å®šä½ç½®åˆ é™¤èŠ‚ç‚¹**ï¼š
```js
removeByIndex(index) {
	if (index < 0 || index > this.size - 1) {
		return false;  // åˆ é™¤æ“ä½œæ— æ•ˆ
	} else {
		if (this.size === 1) {
			// åˆ¤æ–­é“¾è¡¨é•¿åº¦æ˜¯å¦ä¸º 1
			this.head = null;
			this.tail = null;
		} else {
			if (index === 0) {
				// åˆ é™¤ç¬¬ä¸€ä¸ªèŠ‚ç‚¹ï¼Œå¤´æŒ‡é’ˆheadå¾€ä¸‹æŒ‡
				this.head = this.head.next;
				this.head.prev = null;
			} else if (index === this.size - 1) {
				// åˆ é™¤æœ€åä¸€ä¸ªèŠ‚ç‚¹ï¼Œå°¾æŒ‡é’ˆtailå¾€å‰æŒ‡
				this.tail = this.tail.prev;
				this.tail.next = null;
			} else {
				let curr = this.head;
				let prev = null;
				let i = 0;
				while (i < index) {
					prev = curr;
					curr = curr.next;
					i++;
				}
				// æ‰¾åˆ°æŒ‡å®šèŠ‚ç‚¹å(è¶Šè¿‡ä¸­é—´åˆ é™¤çš„èŠ‚ç‚¹)
				curr.prev.next = curr.next;
				curr.next.prev = curr.prev;
			}
		}
	this.size--;
	return true;
	}
}
```
`indexOf(value)`**æŸ¥æ‰¾ç›®æ ‡å€¼çš„èŠ‚ç‚¹ä¸‹æ ‡**ï¼šï¼ˆå’Œå•å‘é“¾è¡¨ç›¸ä¼¼ï¼‰
```js
indexOf(value) {
	let index = 0;  // åˆå§‹åŒ–ç´¢å¼• index = 0
	let curr = this.head;
	while (curr) {
		if (curr.value === value) {
			return index;
		}
		curr = curr.next;
		index++;
	}
	return -1;  // æ²¡æœ‰æ‰¾åˆ°æŒ‡å®šç›®æ ‡
}
```
`removeByValue(value)`**æŒ‡å®šå€¼åˆ é™¤èŠ‚ç‚¹**ï¼šï¼ˆä¸å•å‘é“¾è¡¨ç›¸ä¼¼ï¼‰
```js
removeByValue(value) {
	const index = this.indexOf(value);
	return this.removeByIndex(index);
}
```
`get(index)`**è·å–å¯¹åº”ä½ç½®çš„å…ƒç´ **ï¼š
```js
get(index) {
	if (index < 0 || index > this.size - 1) {
		return null;  // æ“ä½œæ— æ•ˆ
	}
	let curr = this.head;
	let i = 0;
	while (i < index) {
		curr = curr.next;
		i++;
	}
	return curr.value;
}
```
`update(index, value)`**æ›´æ–°æŸä¸ªå…ƒç´ **ï¼š
```js
update(index, value) {
	if (index < 0 || index > this.size - 1){
		return false;  // æ›´æ–°æ“ä½œæ— æ•ˆ
	}
	let curr = this.head;
	let i = 0;
	while (i < index) {
		curr = curr.next;
	}
	curr.value = value;
	return true;
}
```
`print()`**æ‰“å°é“¾è¡¨**ï¼š
```js
print() {
	const arr = [];
	let curr = this.head;
	while (curr) {
		arr.push(curr.value);
		curr = curr.next;
	}
	console.log(arr.join('->'));
}
```
## é˜Ÿåˆ— (queue)
é˜Ÿåˆ—æ˜¯ä¸€ç§éµå¾ªå…ˆå…¥å…ˆå‡ºï¼ˆFIFOï¼‰è§„åˆ™çš„æ•°æ®ç»“æ„ï¼Œé˜Ÿåˆ—æœ‰ä¸¤ä¸ªæŒ‡é’ˆï¼šé˜Ÿé¦–å’Œé˜Ÿå°¾ã€‚æœ€å…ˆè¿›å…¥é˜Ÿåˆ—è¿›è¡Œæ’é˜Ÿçš„é¡¹ç›®ä½äº**é˜Ÿé¦–**ï¼Œè€Œæœ€åè¿›å…¥é˜Ÿåˆ—çš„é¡¹ç›®ä½äº**é˜Ÿå°¾**ã€‚
[![queue.png](https://www.freeimg.cn/i/2024/03/24/660014652ae51.png)](https://www.freeimg.cn/i/2024/03/24/660014652ae51.png)æ¥ä¸‹æ¥ç”¨`JavaScript`æ¥å®ç°ä¸€ä¸ªç®€å•çš„é˜Ÿåˆ—ï¼ˆqueueï¼‰ï¼š
```js
class Queue {
	constructor() {
		this.items = {};
		this.headIndex = 0;
		this.tailIndex = 0;
	}
}
```
`enqueue(item)`**å…¥é˜Ÿæ“ä½œï¼š**
```js
enqueue(item) {
	this.items[this.tailIndex] = item;
	this.tailIndex++;
}
```
`dequeue(item)`**å‡ºé˜Ÿæ“ä½œï¼š**
```js
dequeue() {
	const item = this.items[this.headIndex];
	delete this.items[this.headIndex];
	this.headIndex++;
	return item;
}
```
`peek()`**åªè¯»é˜Ÿé¦–é¡¹**ï¼š
```js
peek() {
	return this.items[this.headIndex];
}
```
`getLength()`**è·å–é˜Ÿåˆ—é•¿åº¦**ï¼š
```js
getLength() {
	return this.tailIndex - this.headIndex;
}
```
ä»¥ä¸Šçš„æ¡ˆä¾‹æ˜¯ä»å°¾éƒ¨`tailIndex`å¼€å§‹æ’å…¥æ•°æ®ï¼Œæ•°æ®ä»`headIndex`å¤„å‡ºæ¥ï¼Œæ‰€ä»¥å‡ºé˜Ÿæ“ä½œå¹¶ä¸éœ€è¦ä¼ å…¥å‚æ•°`item`ï¼Œåªéœ€è¦ä¼ å‡ºå·²æ’å…¥çš„å¯¹è±¡å³å¯ã€‚
>å¦å¤–ï¼Œå¯ä»¥ä½¿ç”¨æ•°ç»„æ¥æ¨¡æ‹Ÿé˜Ÿåˆ—`queue`çš„æ“ä½œï¼Œä½¿ç”¨åˆ°`push()/shift()/unshift()`ç­‰æ–¹æ³•ã€‚
## æ ˆ (Stack)
æ ˆæ˜¯ä¸€ç§éµå¾ª**åè¿›å…ˆå‡º**ï¼ˆLIFOï¼‰è§„åˆ™çš„æœ‰åºé›†åˆã€‚æ–°æ·»åŠ çš„æˆ–è€…å¾…åˆ é™¤çš„å…ƒç´ éƒ½ä¿å­˜åœ¨æ ˆçš„å°¾éƒ¨ï¼ˆå³æ ˆé¡¶ï¼‰ï¼Œå¦ä¸€ç«¯å«æ ˆåº•ã€‚åœ¨æ ˆé‡Œï¼Œæ–°å…ƒç´ éƒ½é è¿‘æ ˆé¡¶ï¼Œæ—§å…ƒç´ éƒ½æ¥è¿‘æ ˆåº•ã€‚ã€ç±»ä¼¼è¢œå­æˆ–è€…å£è¢‹ï¼Œæœ€å…ˆæ”¾å…¥çš„æœ€åå‡ºæ¥ã€‘[![stack.png](https://www.freeimg.cn/i/2024/03/26/660262589d3b7.png)](https://www.freeimg.cn/i/2024/03/26/660262589d3b7.png)æ¥ä¸‹æ¥ä½¿ç”¨`JavaScript`å®ç°ä¸€ä¸ªç®€å•çš„æ ˆï¼ˆStackï¼‰ï¼š
```js
class Stack {
	constructor() {
		this.items = {};
		this.top = 0;  // ä»æ ˆåº•å¼€å§‹å‘ä¸Šï¼ŒæŒ‡å‘æ ˆé¡¶çš„å…ƒç´ 
	}
} 
```
å†å†™ä¸€äº›å¸¸è§„çš„æ“ä½œ`push()/pop()/peek()/getSize()/reset()/isEmpty()/print()`
```js
push(item) {
	this.items[this.top] = item;
	this.top++;
}

pop() {
	const item = this.items[this.top - 1];
Â  Â  delete this.items[this.top];
Â  Â  this.top--;
Â  Â  return item;
}

peek() {
Â  Â  return this.items[this.top - 1];
} 

getSize() {
Â  Â  return this.top + 1;
} 

reset() {
	this.items = {};
}

isEmpty() {
Â  Â  return this.top === 0;
}

print() {
Â  Â  const arr = [];
Â  Â  let curr = this.top;
Â  Â  while (curr > 0) {
Â  Â  Â  arr.push(this.items[curr - 1]);
Â  Â  Â  curr--;
Â  Â  }
Â  Â  console.log(arr.join('->'));
}
```
>å…¶å®ï¼Œæ ˆå’Œé˜Ÿåˆ—ç±»ä¼¼ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨æ•°ç»„ Array æ¥å®ç°ï¼Œä¸”æ•°ç»„æœ‰åŸç”Ÿçš„`push/pop/shift/unshift/.length`ç­‰æ–¹æ³•ï¼Œå®ç°èµ·æ¥ä¼šæ¯”`items = {}`è¦æ–¹ä¾¿è®¸å¤šã€‚
## å † ï¼ˆHeapï¼‰
å †æ˜¯ä¸€é¢—**å®Œå…¨äºŒå‰æ ‘**ï¼ˆcomplete binary treeï¼‰ã€‚å †æ˜¯äºŒå‰æ ‘çš„ä¸€ç§ï¼Œæ»¡è¶³ä»¥ä¸‹æ¡ä»¶ï¼š
- ä»»æ„èŠ‚ç‚¹å¤§äºæˆ–å°äºå®ƒçš„æ‰€æœ‰å­èŠ‚ç‚¹ï¼ˆå¤§æ ¹å †ã€å°æ ¹å †ï¼‰
- æ€»æ˜¯ä¸€å®Œå…¨æ ‘ï¼Œå³é™¤äº†æœ€åº•å±‚ï¼Œå…¶å®ƒå±‚çš„èŠ‚ç‚¹éƒ½è¢«å…ƒç´ å¡«æ»¡
æ ¹æ®æ ¹èŠ‚ç‚¹çš„å¤§å°ï¼Œå°†æ ¹èŠ‚ç‚¹æœ€å¤§çš„å †ç§°ä¸º`æœ€å¤§å †`ï¼Œæ ¹èŠ‚ç‚¹æœ€å°çš„å †ç§°ä¸º`æœ€å°å †`ã€‚
[![binary_heap.jpg](https://www.freeimg.cn/i/2024/03/26/6602739528924.jpg)](https://www.freeimg.cn/i/2024/03/26/6602739528924.jpg
æˆ‘ä»¬å…ˆæ„å»ºä¸€ä¸ªç®€å•çš„ä»¥0ä¸ºæ ¹èŠ‚ç‚¹çš„æœ€å°å †`MinHeap`ï¼š
```js
class MinHeap {
	// é»˜è®¤ä¸ºæœ€å°å †ï¼Œå¦‚æœéœ€è¦æœ€å¤§å †éœ€è¦è¾“å…¥(x, y) => y - x
	constructor(compareFunc = (x,y) => x - y, heap = []) {
		this.heap = heap;
		this.size = heap.length;
		this.compare = compareFunc;
		this.buildHeap();
	}

	// æ¯”è¾ƒä¸¤ä¸ªèŠ‚ç‚¹å¤§å°
	compareItems(a, b) {
		return this.compare(a, b) > 0;
	}

	// å»ºå †æ“ä½œ (ä»ä¸‹å‘ä¸Šå»ºå †)
	buildHeap(heap) {
		for (let i = 0; i < heap.length; i++) {
			this.insert(heap[i]);
		}
	}

	// å»ºå †æ“ä½œ (ä»ä¸Šå‘ä¸‹å»ºå †)
	buildHeap(heap) {
		// ä»æœ€åä¸€ä¸ªéå¶å­ç»“ç‚¹å¼€å§‹ï¼Œå‘ä¸‹heapifyDown
		for (let i = Math.floor(this.size / 2) - 1; i >= 0; i--) {
			this.heapifyDown(i);
		}
	}
}
```
### å †çš„æ“ä½œ[0-based]
> å…¶ä¸­`this.size`ä¸ºå½“å‰å †çš„ç»“ç‚¹æ€»æ•°ï¼Œæ—¶é—´å¤æ‚åº¦å‡ä¸ºo(logn)

è·å¾—çˆ¶èŠ‚ç‚¹ã€å·¦ä¾§å­èŠ‚ç‚¹ã€å³ä¾§å­èŠ‚ç‚¹ï¼š
```js
leftChild(pos) {
	return 2 * pos + 1;
	// è‹¥ä¸º1-basedçš„è¯åˆ™ä¸º2 * pos
}
rightChild(pos) {
	return 2 * pos + 2;
	// è‹¥ä¸º1-basedçš„è¯åˆ™ä¸º2 * pos + 1
}
parent(pos) {
	return Math.floor((pos - 1) / 2);
	// è‹¥ä¸º1-basedçš„è¯åˆ™ä¸º pos / 2
}
```
åˆ¤æ–­æ˜¯å¦ä¸ºå¶å­ç»“ç‚¹ï¼ˆæ²¡æœ‰å­èŠ‚ç‚¹çš„èŠ‚ç‚¹ï¼‰ï¼š
```js
isLeaf(pos) {
	return pos >= Math.floor(this.size / 2) && pos < this.size;
}
```
ä¸Šæµ®æ“ä½œ`heapifyUp`:
é¦–å…ˆéœ€è¦åˆ†å¼€ä¸¤ç§æƒ…å†µæ¥æ¯”è¾ƒå¤§å°ï¼š
- å°é¡¶å †ï¼ša > b, true å‰å¤§äºå
- å°é¡¶å †ï¼ša < b, true å‰å°äºå
```js
heapifyUp(pos) {
	let parent = this.parent(pos);  // è·å–posçš„çˆ¶èŠ‚ç‚¹ä¸‹æ ‡
	// pos è¿˜æ²¡åˆ°é¡¶ && posçš„çˆ¶èŠ‚ç‚¹å€¼å¤§äºå°é¡¶æˆ–å°äºå¤§é¡¶poså€¼æ—¶ï¼Œposä¸çˆ¶èŠ‚ç‚¹äº¤æ¢
	while (pos && this.compareItems(this.heap[parent], this.heap[pos])) {
		[this.heap[pos], this.heap[parent]] = [this.heap[parent], this.heap[pos]];
		pos = parent;
		// è·å¾—äº¤æ¢åposçš„æ–°çˆ¶èŠ‚ç‚¹
		parent = this.parent(pos);
	}
}
```
> ç›´åˆ°posèŠ‚ç‚¹ä¸Šæµ®åˆ°äº†æ ¹èŠ‚ç‚¹çš„ä½ç½®æˆ–posçš„çˆ¶èŠ‚ç‚¹å°äºposè‡ªèº«çš„å€¼ï¼ˆæœ€å°å †ï¼‰

ä¸‹æ²‰æ“ä½œ`heapifyDown`:
```js
heapifyDown(pos) {
	if (this.isLeaf(pos)) return;
	let left = this.leftChild(pos);
	let right = this.rightChile(pos);
	let tmp = 0;
	while (!this.isLeaf(pos)) {
		// ç¡®å®šå·¦å³å­èŠ‚ç‚¹ä¹‹é—´çš„å¤§å°å…³ç³»ï¼Œè¿›è€Œç¡®å®šposæ›´æœ‰å¯èƒ½ç§»åŠ¨åˆ°å“ªè¾¹
		// å°é¡¶å †ä¸­ç»“ç‚¹æ›´å¯èƒ½ç§»åŠ¨åˆ°å·¦å³å­èŠ‚ç‚¹ä¸­æ›´å°çš„é‚£è¾¹
		if (right < this.size) {
			tmp = this.compareItems(this.heap[left], this.heap[right]) ? right : left;
		} else tmp = left;  // å¦‚æœæ²¡æœ‰å³è¾¹çš„èŠ‚ç‚¹

		// ä»¥ä¸‹ä»£ç ç¡®è®¤å½“å‰ç»“ç‚¹æ˜¯å¦è¦ç§»åŠ¨åˆ°tmpä½ç½®
		if (this.compareItems(this.heap[pos], this.heap[tmp])) {
			[this.heap[pos], this.heap[temp]] = [this.heap[tmp], this.heap[pos]];
			pos = tmp;
			left = this.leftChild(pos);
			right = this.rightChild(pos);
		} else break;  // ä¸èƒ½ç§»åŠ¨åˆ°tmpï¼Œåˆ™é€€å‡º
	}
}
```
åˆ é™¤æŒ‡å®šä½ç½®`pos`ç»“ç‚¹ï¼š
```js
remove(pos) {
	if (pos < this.size) {
		let last = this.getLast();
		let delNode = this.heap[pos];
		this.size--;

		// å¦‚æœposæ˜¯æœ«å°¾ç»“ç‚¹ï¼Œç›´æ¥size--
		if (pos < this.size) {
			this.heap[pos] = last;
			this.heapifyDown(pos);
		}
		return delNode;
	}
}
```
å…¶ä¸­`getLast()`ä¸ºï¼š
```js
getLast() {
	return this.size > 0 ? this.heap[this.size - 1] : undefined;
}
```
æ’å…¥ç»“ç‚¹ï¼š
```js
insert(val) {
	let pos = this.size++;  // å¢åŠ å †èŠ‚ç‚¹æ•°
	this.heap[pos] = val;  // æ–°èŠ‚ç‚¹
	this.heapifyUp(pos);  // å›åˆ°åº”æœ‰çš„ä½ç½®
}
```
ä»¥ä¸‹æ‘˜è‡ª[ã€åŸºç¡€ç®—æ³•ã€‘è¯¦è§£å †+é¢è¯•å¿«é€Ÿæ‰‹å†™å †ä»£ç  | Hu's Notes (hukeyi.github.io)](https://hukeyi.github.io/posts/basic-heap-js/)ï¼š
```js
class Heap {
	constructor(func) {
		this.h = [];
		this.size = 0;
		this.func = func;
	}

	comp(a, b) {
		return this.func(this.h[a], this.h[b]) > 0;
	}

	swap(a, b) {
		[this.h[a], this.h[b]] = [this.h[b], this.h[a]];
	}

	left(p) {
		return p * 2 + 1;
	}

	right(p) {
		return p * 2 + 2;
	}

	parent(p) {
		return (p - 1) >> 1;
	}

	isLeaf(p) {
		return p >= this.size >> 1 && p < this.size;
	}

	// ä¸Šæµ®
	swim(p) {
		let parent = this.parent(p);
		while (p > 0 && this.comp(parent, p)) {
			this.swap(p, parent);
			p = parent;
			parent = this.parent(p);
		}
	}

	// ä¸‹æ²‰
	sink(p) {
		while (!this.isLeaf(p)) {
			let l = this.left(p),
				r = this.right(p),
				next = l;
			if (r < this.size && this.comp(next, r)) next = r;

			if (this.comp(p, next)) {
				this.swap(next, p);
				p = next;
			} else break;
		}
	}

	insert(val) {
		this.h[this.size++] = val;
		this.swim(this.size - 1);
	}

	removeTop() {
		let top = this.h[0];
		this.swap(0, this.size - 1);
		this.size--;
		if (this.size > 0) this.sink(0);
		return top;
	}
}
```
## æ•£åˆ—è¡¨(Hash)
æ•£åˆ—è¡¨ï¼Œä¹Ÿç§°ä½œå“ˆå¸Œè¡¨ï¼Œæ˜¯æ ¹æ®é”®(Key)è€Œç›´æ¥è®¿é—®åœ¨å†…å­˜å­˜å‚¨ä½ç½®çš„æ•°æ®ç»“æ„ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå®ƒé€šè¿‡è®¡ç®—ä¸€ä¸ªå…³äºé”®å€¼çš„å‡½æ•°ï¼ˆæ•£åˆ—å‡½æ•°ï¼‰ï¼Œå°†æ‰€éœ€æŸ¥è¯¢çš„æ•°æ®æ˜ å°„åˆ°è¡¨ä¸­ä¸€ä¸ªä½ç½®æ¥è®¿é—®è®°å½•ï¼Œè¿™åŠ å¿«äº†æŸ¥æ‰¾é€Ÿåº¦ã€‚[![æ•£åˆ—è¡¨.png](https://www.freeimg.cn/i/2024/04/09/661531601d9cd.png)](https://www.freeimg.cn/i/2024/04/09/661531601d9cd.png)
### æ•£åˆ—è¡¨çš„æ„æˆ
æ•£åˆ—è¡¨çš„ç»„æˆåˆ†ä¸ºä»¥ä¸‹è¿™å‡ ä¸ªéƒ¨åˆ†ï¼š
- Mä¸ªæ§½
- æ•£åˆ—å‡½æ•°(hashå‡½æ•°)
- addæ–¹æ³•æ·»åŠ é”®å€¼åˆ°æ•£åˆ—è¡¨ä¸­
- deleteæ–¹æ³•åˆ é™¤æŒ‡å®šé”®å€¼
- searchæ–¹æ³•æ ¹æ®keyå¯»æ‰¾æŒ‡å®šçš„å€¼
è®©æˆ‘ä»¬å…ˆç®€å•åˆå§‹åŒ–ä¸€ä¸ªæ•£åˆ—è¡¨ï¼š
```js
class HashTable {
	constructor(num = 1000) {
		this.M = num;  // 1000 ä¸ªæ§½ä½
		this.slots = new Array(num);  // æ§½ä½å†…çš„å¤šä¸ªå­˜å‚¨ç©ºé—´
	}
}
```
### æ•£åˆ—å‡½æ•°
å¤„ç†å­—ç¬¦ä¸²çš„æ•£åˆ—å‡½æ•°ï¼š
```js
h(str) {
	str = str + '';
	return [...str].reduce((hash, c) => {
		hash = (331 * hash + c.charCodeAt()) % this.M;
		return hash;
	}, 0);
}
```
### åŠŸèƒ½å‡½æ•°
æ·»åŠ é”®å€¼å¯¹ï¼š
```js
add(key, value) {
	const h = this.h(key);
	// åˆ¤æ–­è¿™ä¸ªæ§½æ˜¯å¦æ˜¯ä¸€ä¸ªäºŒç»´æ•°ç»„ï¼Œä¸æ˜¯åˆ™åˆ›å»ºäºŒç»´æ•°ç»„
	if (!this.slots[h]) {
		this.slots[h] = [];
	}
	const o = new Object({key, value});
	// å°†å€¼æ·»åŠ åˆ°å¯¹åº”çš„æ§½ä¸­
	this.slots[h].push(o);
}
```
åˆ é™¤é”®å€¼å¯¹ï¼š
```js
delete(key) {
	const h = this.h(key);
	this.slots[h] = this.slots[h].filter(item => item.key !== key);
}
```
æŸ¥æ‰¾å¯¹åº”çš„å€¼ï¼š
```js
search(key) {
	const h = this.h(key);
	const list = this.slots[h];
	const data = list.find(x => x.key === key);
	return data ? data.value : null;
}
```
## æ ‘ï¼ˆDFSå’ŒBFSï¼‰
æ ‘ï¼Œæ˜¯ä¸€ç§ä½¿ç”¨èŠ‚ç‚¹æ¥æ¨¡æ‹Ÿåˆ†ç­‰çº§ï¼ˆå±‚æ¬¡ï¼‰æ•°æ®çš„æ•°æ®ç»“æ„ã€‚èŠ‚ç‚¹å­˜å‚¨æ•°æ®ï¼Œå¹¶æŒ‡å‘å…¶ä»–èŠ‚ç‚¹ï¼ˆæ¯ä¸ªèŠ‚ç‚¹éƒ½å­˜å‚¨æœ‰è‡ªèº«æ•°æ®ï¼Œå’ŒæŒ‡å‘å…¶å®ƒèŠ‚ç‚¹çš„æŒ‡é’ˆï¼‰ã€‚ä¸¤ç§éå†æ–¹å¼ï¼š`DFS`å’Œ`BFS`ï¼Œåˆ†åˆ«æ˜¯`Depth-First-Search`æ·±åº¦ä¼˜å…ˆæœç´¢ï¼Œ`Breadth-First-Search`å®½åº¦ä¼˜å…ˆæœç´¢ã€‚[![BFS_DFS.png](https://www.freeimg.cn/i/2024/04/15/661ced32929d1.png)](https://www.freeimg.cn/i/2024/04/15/661ced32929d1.png)
æ ‘æœ‰ä»¥ä¸‹å‡ ä¸ªç‰¹ç‚¹ï¼š
- æ¯ä¸ªèŠ‚ç‚¹éƒ½åªæœ‰æœ‰é™ä¸ªå­èŠ‚ç‚¹æˆ–æ— å­èŠ‚ç‚¹
- æ²¡æœ‰çˆ¶èŠ‚ç‚¹çš„èŠ‚ç‚¹ç§°ä¸ºæ ¹èŠ‚ç‚¹
- æ¯ä¸€ä¸ªéæ ¹èŠ‚ç‚¹æœ‰ä¸”åªæœ‰ä¸€ä¸ªçˆ¶èŠ‚ç‚¹
- é™¤äº†æ ¹èŠ‚ç‚¹å¤–ï¼Œæ¯ä¸ªå­èŠ‚ç‚¹å¯ä»¥åˆ†ä¸ºå¤šä¸ªä¸ç›¸äº¤çš„å­æ ‘
- æ ‘é‡Œé¢æ²¡æœ‰ç¯è·¯
### æ ‘çš„ç§ç±»
æ ‘çš„ç§ç±»åˆ†ä¸ºä»¥ä¸‹å‡ ç§ï¼š
- **äºŒå‰æ ‘**ï¼šæ¯ä¸ªèŠ‚ç‚¹æœ€å¤šå«æœ‰ä¸¤ä¸ªå­æ ‘çš„æ ‘
	- å®Œå…¨äºŒå‰æ ‘ï¼šé™¤äº†æœ€åä¸€å±‚å¤–ï¼Œæ¯ä¸€å±‚çš„èŠ‚ç‚¹éƒ½æ˜¯æ»¡çš„ï¼Œä¸”æœ€åä¸€å±‚çš„èŠ‚ç‚¹éƒ½å°½å¯èƒ½åœ°é å·¦æ’åˆ—
	- æ»¡äºŒå‰æ ‘ï¼šé™¤äº†å¶å­èŠ‚ç‚¹å¤–ï¼Œæ¯ä¸ªèŠ‚ç‚¹éƒ½æœ‰ä¸¤ä¸ªå­èŠ‚ç‚¹
	- äºŒå‰æŸ¥æ‰¾æ ‘ï¼šæ¯ä¸ªèŠ‚ç‚¹çš„å€¼éƒ½å¤§äºå…¶å·¦å­æ ‘ä¸­çš„å€¼ï¼Œå°äºå…¶å³å­æ ‘ä¸­çš„å€¼
- **éœå¤«æ›¼æ ‘**ï¼šä¸€ç§ç”¨äºæ•°æ®å‹ç¼©çš„æ ‘ç»“æ„ï¼Œæ ¹æ®å­—ç¬¦å‡ºç°çš„é¢‘ç‡æ„å»ºæ ‘ï¼Œé¢‘ç‡è¶Šé«˜çš„å­—ç¬¦ç¦»æ ¹èŠ‚ç‚¹è¶Šè¿‘
- **å­—å…¸æ ‘**ï¼šç”¨äºå­˜å‚¨å…³è”æ•°ç»„çš„æ ‘å½¢æ•°æ®ç»“æ„ï¼Œé€‚ç”¨äºå­—ç¬¦ä¸²é”®å€¼çš„å¿«é€ŸæŸ¥æ‰¾ã€æ’å…¥å’Œåˆ é™¤
- **çº¢é»‘æ ‘**ï¼šä¸€ç§è‡ªå¹³è¡¡çš„äºŒå‰æœç´¢æ ‘ï¼Œå…·æœ‰è¾ƒä¸ºä¸¥æ ¼çš„å¹³è¡¡æ€§è´¨ï¼Œç”¨äºå®ç°é«˜æ•ˆçš„æ’å…¥ã€åˆ é™¤å’ŒæŸ¥æ‰¾æ“ä½œ
- **çº¿æ®µæ ‘**ï¼šä¸€ç§ç”¨äºè§£å†³åŒºé—´æŸ¥è¯¢é—®é¢˜çš„æ ‘å½¢æ•°æ®ç»“æ„ï¼Œé€šå¸¸ç”¨äºå¤„ç†ä¸€ç»´æ•°ç»„çš„åŒºé—´æŸ¥è¯¢ã€æ›´æ–°ç­‰æ“ä½œ
- **AVLæ ‘**ï¼šä¸€ç§è‡ªå¹³è¡¡çš„äºŒå‰æœç´¢æ ‘ï¼Œé€šè¿‡æ—‹è½¬æ“ä½œä¿æŒæ ‘çš„å¹³è¡¡ï¼Œå…·æœ‰è¾ƒä¸ºä¸¥æ ¼çš„å¹³è¡¡æ€§è´¨ï¼Œé€šå¸¸ç”¨äºå®ç°é«˜æ•ˆçš„æ’å…¥ã€åˆ é™¤å’ŒæŸ¥æ‰¾æ“ä½œ
- **Bæ ‘/B+æ ‘**ï¼šä¸€ç§å¯¹è¯»å†™æ“ä½œè¿›è¡Œä¼˜åŒ–çš„è‡ªå¹³è¡¡çš„äºŒå‰æŸ¥æ‰¾æ ‘ï¼Œèƒ½å¤Ÿä¿æŒæ•°æ®æœ‰åºï¼Œæ‹¥æœ‰å¤šäºä¸¤ä¸ªå­æ ‘ï¼Œå¸¸ç”¨äºæ•°æ®åº“å’Œæ–‡ä»¶ç³»ç»Ÿä¸­
- **æ ‘å †(Heap)**ï¼šä¸€ç§ç‰¹æ®Šçš„æ ‘ç»“æ„ï¼Œé€šå¸¸ç”¨æ•°ç»„å®ç°ï¼Œå¸¸è§çš„æœ‰äºŒå‰å †å’Œ Fibonacci å †ï¼Œç”¨äºå®ç°ä¼˜å…ˆé˜Ÿåˆ—ç­‰æ•°æ®ç»“æ„
#### äºŒå‰æ ‘çš„å®ç°
å…ˆå®šä¹‰ä¸€ä¸ªèŠ‚ç‚¹`Node`çš„ç±»ï¼š
```js
class Node {
Â  constructor(data) {
Â  Â  Â  this.data = data;  // æ•°æ®
Â  Â  Â  this.parent = null;  // çˆ¶èŠ‚ç‚¹
Â  Â  Â  this.children = [];  // å­èŠ‚ç‚¹
Â  }
}
```
å†å®šä¹‰ä¸€ä¸ªæ ‘`Tree`çš„ç±»ï¼š
```js
class Tree {
	constructor(data) {
	Â  Â  let node = new Node(data); Â // åˆ›å»ºæ–°èŠ‚ç‚¹
	Â  Â  this._root = node; Â // èµ‹å€¼æ ¹èŠ‚ç‚¹
Â  }
}
```
##### æ“ä½œæ–¹æ³•
`find(data)`æ–¹æ³•ï¼Œè¯¥æ–¹æ³•ä½¿ç”¨æ·±åº¦ä¼˜å…ˆæœç´¢ï¼ˆDFSï¼‰ï¼Œ`find`å°†é€’å½’çš„å‘ä¸‹è·å–åˆ°æ ‘çš„å¶èŠ‚ç‚¹ï¼Œç„¶åå‘ä¸Šè¿”å›ï¼š
```js
// å¯»æ‰¾æŸä¸ªèŠ‚ç‚¹ (DFS)
find(data, node = this._root) {
// å¦‚æœå½“å‰èŠ‚ç‚¹åŒ¹é…
if (node.data === data) {
  return node;
}
// éå†å­èŠ‚ç‚¹
for (let child of node.children) {
  // å¯¹äºå­æ ‘
  if (this.find(data, child)) {
	return child;
  }
}
// æ‰¾ä¸åˆ°å¯¹åº”çš„æ•°æ®
return null;
}
```
`add(data, parentData)`æ·»åŠ å…ƒç´ åˆ°æŒ‡å®šçš„çˆ¶èŠ‚ç‚¹ï¼š
```js
add(data, parentData) {
	let node = new Node(data);
	let parent = this.find(parentData);
Â  Â  // å¦‚æœçˆ¶èŠ‚ç‚¹å­˜åœ¨ï¼Œå°±æ·»åŠ èŠ‚ç‚¹
Â  Â  if (parent) {
Â  Â  Â  parent.children.push(node);
Â  Â  Â  node.parent = parent;
Â  Â  Â  // è¿”å›èŠ‚ç‚¹
Â  Â  Â  return node;
Â  Â  } else {
Â  Â  Â  throw new Error(`Cannot add node: parent with data ${parentData} not found`);
Â  Â  }
}
```
`remove(data)`åˆ é™¤æŒ‡å®šèŠ‚ç‚¹ï¼š
```js
remove(data) {
	let node = this.find(data);
	if (node) {
	  // è¿”å›è¢«åˆ é™¤èŠ‚ç‚¹çš„çˆ¶èŠ‚ç‚¹parent
	  let parent = node.parent;
	  let indexOfNode = parent.children.indexOf(node);
	  // ä»çˆ¶èŠ‚ç‚¹é‡Œåˆ é™¤ splice(è¦åˆ é™¤å…ƒç´ çš„ç´¢å¼•ï¼Œè¦åˆ é™¤å…ƒç´ çš„æ•°é‡)
	  parent.children.splice(indexOfNode, 1);
	} else {
	  throw new Error(`Cannot remove node: node with data ${data} not found`);
	}
}
```
`forEach(callback, node = this._root)`æ·±åº¦ä¼˜å…ˆæœç´¢éå†ï¼ˆDFSï¼‰ï¼š
```js
forEach(callback, node = this._root) {
	// éå†æ¯ä¸ªå­èŠ‚ç‚¹
	for (let child of node.children) {
	  this.forEach(callback, child);
	}
	// æ•°æ®æ‰¾ä¸åˆ°
	callback(node);
}
```
`forEachBreadthFirst(callback)`å¹¿åº¦ä¼˜å…ˆæœç´¢éå†ï¼ˆBFSï¼‰ï¼š
```js
forEachBreadthFirst(callback) {
	// ä»æ ¹èŠ‚ç‚¹å¼€å§‹
	let queue = [];
	queue.push(this._root);
	while (queue.length > 0) {
	  let node = queue.shift();
	  callback(node);
	  // å°†å­èŠ‚ç‚¹æ¨å…¥é˜Ÿåˆ—
	  for (let child of node.children) {
		queue.push(child);
	  }
	}
}
```
æµ‹è¯•ç”¨ä¾‹ï¼š
```js
let t = new Tree("CEO");
t.add("VP Finance", "CEO");
t.add("VP Sales", "CEO");
t.add("Salesperson", "VP Sales");
t.add("Accountant", "VP Finance");
t.add("Bookkeeper", "VP Finance");
// æ·±åº¦ä¼˜å…ˆæœç´¢
t.forEach((node) => console.log(node.data));
console.log('==========');
// å¹¿åº¦ä¼˜å…ˆæœç´¢
t.forEachBreadthFirst(node => console.log(node.data));
console.log(t.find("Bookkeeper"));  // å±•ç¤ºå¯¹åº”èŠ‚ç‚¹
t.remove("VP Finance");
console.log(t.find("Bookkeeper"));  // null
```
#### éœå¤«æ›¼æ ‘
éœå¤«æ›¼æ ‘ï¼ˆæœ€ä¼˜æ ‘ï¼‰ï¼Œä¹Ÿç§°ä½œå“ˆå¤«æ›¼æ ‘ï¼Œæ˜¯å¸¦æƒè·¯å¾„é•¿åº¦ï¼ˆWPLï¼‰æœ€çŸ­çš„æ ‘ï¼Œå¸¦æƒè·¯å¾„é•¿åº¦ä¸ºä»æ ¹èŠ‚ç‚¹åˆ°è¯¥èŠ‚ç‚¹ä¹‹é—´çš„è·¯å¾„é•¿åº¦ä¸èŠ‚ç‚¹ä¸Šæƒçš„ä¹˜ç§¯ä¹‹å’Œã€‚
æ„æˆéœå¤«æ›¼æ ‘çš„æ­¥éª¤ï¼š
1. ä»å°åˆ°å¤§æ’åºï¼Œå°†æ¯ä¸€ä¸ªèŠ‚ç‚¹çœ‹æˆä¸€é¢—æœ€ç®€äºŒå‰æ ‘
2. å–å‡ºæ ¹èŠ‚ç‚¹æƒå€¼æœ€å°çš„ä¸¤é¢—äºŒå‰æ ‘
3. ç»„æˆä¸€é¢—æ–°çš„äºŒå‰æ ‘ï¼Œè¯¥æ–°çš„äºŒå‰æ ‘çš„æ ¹èŠ‚ç‚¹çš„æƒå€¼æ˜¯å‰é¢ä¸¤é¢—äºŒå‰æ ‘æ ¹èŠ‚ç‚¹æƒå€¼çš„å’Œ
4. å†å°†è¿™é¢—æ–°çš„äºŒå‰æ ‘ï¼Œä»¥æ ¹èŠ‚ç‚¹çš„æƒå€¼å¤§å°å†æ¬¡æ’åºï¼Œä¸æ–­é‡å¤1-2-3-4çš„æ­¥éª¤ï¼Œç›´åˆ°æ•°åˆ—ä¸­æ‰€æœ‰çš„æ•°æ®éƒ½è¢«å¤„ç†
##### éœå¤«æ›¼æ ‘çš„å®ç°
æˆ‘ä»¬å…ˆåˆ›å»ºä¸€ä¸ªèŠ‚ç‚¹ç±»`Node`ï¼š
```js
class Node {
	constructor(value, char, left, right) {
		this.value = value;
		this.char = char;
		this.left = left;
		this.right = right;
	}
}
```
ç„¶åå†å®šä¹‰éœå¤«æ›¼æ ‘`HuffmanTree`çš„ç±»ï¼š
```js
// éœå¤«æ›¼ç¼–ç æ˜¯å°†ä¸€ä¸ªå­—ç¬¦ä¸²åºåˆ—ç”¨äºŒè¿›åˆ¶è¡¨ç¤ºçš„å‹ç¼©ç®—æ³•
class HuffmanTree {
	constructor(str) {
		// ç»Ÿè®¡å­—ç¬¦å‡ºç°é¢‘ç‡
		let hash = {};
		for (let i = 0; i < str.length; i++) {
			// ~~è¡¨ç¤ºå°†undefinedç±»å‹è½¬æ¢ä¸º0
			hash[str[i]] = ~~hash[str[i]] + 1;
		}
		this.hash = hash;

		// æ„é€ éœå¤«æ›¼æ ‘
		this.huffmanTree = this.getHuffmanTree();

		let map = this.getHuffmanCode(this.huffmanTree);
		// æŸ¥çœ‹å¯¹ç…§è¡¨ï¼Œå³æ¯ä¸ªå­—ç¬¦å¯¹åº”çš„äºŒè¿›åˆ¶ç¼–ç 
		console.log(map);

		// æœ€ç»ˆçš„äºŒè¿›åˆ¶ç¼–ç 
		this.binaryStr = this.getBinaryStr(map, str);
	}

	// æ„é€ éœå¤«æ›¼æ ‘
	getHuffmanTree() {
		// ä»¥å„ä¸ªå­—ç¬¦å‡ºç°æ¬¡æ•°ä¸ºnode.value,æ„é€ æ£®æ—
		let forest = [];
		for (let char in this.hash) {
			let node = new Node(this.hash[char], char);
			forest.push(node);
		}

		// ç­‰åˆ°æ£®æ—åªæœ‰ä¸€ä¸ªèŠ‚ç‚¹ï¼Œè¡¨ç¤ºåˆå¹¶è¿‡ç¨‹ç»“æŸ
		let allNodes = [];
		while (forest.length !== 1) {
			// ä»æ£®æ—ä¸­æ‰¾åˆ°ä¸¤ä¸ªæœ€å°çš„æ•°ï¼Œå¹¶ä¸”åˆå¹¶(sortæ”¹å˜åŸæ•°ç»„)
			forest.sort((a, b) => {
				return a.value - b.value;
			});

			let node = new Node(forest[0].value + forest[1].value, "");
			allNodes.push(forest[0]);
			allNodes.push(forest[1]);
			// å·¦å­æ ‘æ”¾ç½®ä½è¯é¢‘
			node.left = allNodes[allNodes.length - 2];
			// å³å­æ ‘æ”¾ç½®é«˜è¯é¢‘
			node.right = allNodes[allNodes.length - 1];

			// åˆ é™¤æœ€å°çš„ä¸¤é¢—æ ‘
			forest = forest.slice(2);
			// æ–°å¢æ ‘çš„åŠ å…¥
			forest.push(node);
		}

		// ç”Ÿæˆçš„éœå¤«æ›¼æ ‘
		return forest[0];
	}

	// éå†éœå¤«æ›¼æ ‘ï¼Œ è¿”å›ä¸€ä¸ªåŸå§‹å­—ç¬¦å’ŒäºŒè¿›åˆ¶ç¼–ç çš„å¯¹ç…§è¡¨
	getHuffmanCode(tree) {
		let hash = {};  // å¯¹ç…§è¡¨
		let traversal = (node, curPath) => {
			// æ²¡æœ‰å·¦å­æ ‘ä¹Ÿæ²¡æœ‰å³å­æ ‘
			if (!node.length && !node.right) return;
			// æœ‰å·¦å­å¶
			if (node.left && !node.left.left && !node.left.right) {
				hash[node.left.char] = curPath + "0";
			}
			// æœ‰å³å­å¶
			if (node.right && !node.right.left && !node.right.right) {
				hash[node.right.char] = curPath + "1";
			}
			// å¾€å·¦éå†ï¼Œè·¯å¾„åŠ 0
			if (node.left) {
				traversal(node.left, curPath + "0");
			}
			// å¾€å³éå†ï¼Œè·¯å¾„åŠ 1
			if (node.right) {
				traversal(node.right, curPath + "1");
			}
		};
		// éå†éœå¤«æ›¼æ ‘
		traversal(tree, "");
		return hash;
	}

	// è¿”å›æœ€ç»ˆçš„å‹ç¼©åçš„äºŒè¿›åˆ¶ä¸²
	getBinaryStr(map, originStr) {
		let result = "";
		for (let i = 0; i < originStr.length; i++) {
			result += map[originStr[i]];
		}
		return result;
	}
}
```
##### æµ‹è¯•ç»“æœ
```js
let tree = new huffmanTree("ABBCCCDDDDEEEEE");
console.log(tree);

// { C: '00', A: '010', B: '011', D: '10', E: '11' }
// binaryStr: '010011011000000101010101111111111'
```
#### å­—å…¸æ ‘
å­—å…¸æ ‘ï¼Œæ˜¯ä¸€ç§**ç©ºé—´æ¢æ—¶é—´**çš„æ•°æ®ç»“æ„ï¼Œåˆç§°ä¸ºTrieæ ‘ã€å‰ç¼€æ ‘ï¼Œä¸€èˆ¬ç”¨äºç»Ÿè®¡ã€æ’åºå’Œä¿å­˜å¤§é‡å­—ç¬¦ä¸²ï¼Œç»å¸¸è¢«ç”¨äºæœç´¢å¼•æ“çš„æ–‡æœ¬è¯é¢‘ç»Ÿè®¡ã€‚ä¼˜ç‚¹ï¼šåˆ©ç”¨å­—ç¬¦ä¸²çš„å…¬å…±å‰ç¼€æ¥å‡å°‘æŸ¥è¯¢æ—¶é—´ï¼Œæœ€å¤§é™åº¦åœ°å‡å°‘æ— è°“çš„å­—ç¬¦ä¸²æ¯”è¾ƒï¼ŒæŸ¥è¯¢æ•ˆç‡æ¯”å“ˆå¸Œæ ‘é«˜ã€‚
å­—å…¸æ ‘ä¸‰ä¸ªé‡è¦æ€§è´¨ï¼š
1. æ ¹èŠ‚ç‚¹ä¸åŒ…å«å­—ç¬¦ï¼Œé™¤äº†æ ¹èŠ‚ç‚¹æ¯ä¸ªèŠ‚ç‚¹éƒ½åªåŒ…å«ä¸€ä¸ªå­—ç¬¦ã€‚rootèŠ‚ç‚¹ä¸å«å­—ç¬¦
2. ä»æ ¹èŠ‚ç‚¹åˆ°æŸä¸€ä¸ªèŠ‚ç‚¹ï¼Œè·¯è¿‡å­—ç¬¦ä¸²èµ·æ¥å°±æ˜¯è¯¥èŠ‚ç‚¹å¯¹åº”çš„å­—ç¬¦ä¸²
3. æ¯ä¸ªèŠ‚ç‚¹çš„å­èŠ‚ç‚¹å­—ç¬¦ä¸åŒï¼Œå­—ç¬¦æ˜¯å”¯ä¸€çš„
##### å­—å…¸æ ‘(Trie)çš„å®ç°
å…ˆå®šä¹‰ä¸€ä¸ªèŠ‚ç‚¹ï¼š
```js
class Node {
	constructor(value) {
		this.value = value;
		this.isWord = false;
		this.children = {};
	}
}
```
å†åˆ›å»ºä¸€ä¸ªå­—å…¸æ ‘(Trie)çš„ç±»ï¼š
```js
class Trie {
	constructor() {
		// æ ¹èŠ‚ç‚¹ä¸éœ€è¦å€¼
		this.root = new Node();
	}
}
```
æ’å…¥æ–¹æ³•`insert(word)`ï¼š
```js
insert(word) {
	let curNode = this.root;  // è·å–å½“å‰èŠ‚ç‚¹
	let arr = word.split('');  // æ‹†åˆ†å•è¯
	for(let i = 0; i < arr.length; i++) {
		// è·å–å­èŠ‚ç‚¹
		let isHasChildNode = curNode.children[arr[i]];
		// å¦‚æœæ²¡æœ‰å­èŠ‚ç‚¹ï¼Œå°±åˆ›å»ºä¸€ä¸ªä»¥å½“å‰å­—ç¬¦ä¸ºvalueçš„å­èŠ‚ç‚¹
		if(!isHasChildNode) {
			curNode.children[arr[i]] = new Node(arr[i]);
		}
		// åˆ‡æ¢å½“å‰èŠ‚ç‚¹ä¸ºæ–°åˆ›å»º/å·²å­˜åœ¨çš„èŠ‚ç‚¹
		curNode = curNode.children[arr[i]];

		// éå†åˆ°æœ€åä¸€ä¸ªå­—ç¬¦æ‰€å¯¹åº”çš„èŠ‚ç‚¹ï¼Œå°†è¯¥èŠ‚ç‚¹çš„isWordçš„å±æ€§è®¾ç½®ä¸ºtrue
		if(i === arr.length - 1) {
			curNode.isWord = true;
		}
	}
}
```
æŸ¥è¯¢æ–¹æ³•`search(word)`ï¼š
```js
search(word) {
	// å°†æ ¹èŠ‚ç‚¹è®¾ç½®ä¸ºå½“å‰èŠ‚ç‚¹
	let curNode = this.root;
	let arr = word.split('');

	for(let i = 0; i < arr.length; i++) {
		// å¦‚æœèŠ‚ç‚¹ä¸å­˜åœ¨è¿”å›false
		if(!curNode.children[arr[i]]) {
			return false;
		}
		curNode = curNode.children[arr[i]];

		// å¦‚æœæœç´¢åˆ°æœ€åä¸€ä¸ªå­—ç¬¦ï¼Œå°±æ ¹æ®isWordè¿›è¡Œåˆ¤æ–­
		if(i === arr.length - 1) {
			return curNode.isWord;
		}
	}
}
```
å‰ç¼€è¡¥å…¨æŸ¥è¯¢æ–¹æ³•`startsWith`ï¼š
```js
startsWith(prefix) {
	let curNode = this.root;
	let arr = prefix.split('');
	for(let i = 0; i < arr.length; i++) {
		// å‡¡æ˜¯æŸ¥æ‰¾çš„å•è¯çš„ä¸­é—´æŸä¸ªå­—ç¬¦ç¼ºå°‘ï¼Œå°±è¿”å›false
		if(!curNode.children[arr[i]]) {
			return false;
		}
		curNode = curNode.children[arr[i]];
	}
	// æ¯ä¸ªå­—ç¬¦éƒ½æ‰¾åˆ°äº†èŠ‚ç‚¹åˆ™è¿”å›true
	return true;
}
```
##### æµ‹è¯•ç»“æœ
```js
let trie = new Trie();
trie.insert("Lemon");
console.log(trie.search("Lemon"));  // true
console.log(trie.search("Le"));  // false
console.log(trie.startsWith("Le"));  // true
```
#### AVLæ ‘
AVLæ ‘ï¼Œåˆç§°ä¸ºå¹³è¡¡äºŒå‰æ ‘